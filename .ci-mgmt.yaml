provider: azure
major-version: 5
parallel: 1
timeout: 90
generate-nightly-test-workflow: true
providerVersion: github.com/hashicorp/terraform-provider-azurerm/version.ProviderVersion
freeDiskSpaceBeforeTest: true
freeDiskSpaceBeforeBuild: true
freeDiskSpaceBeforeSdkBuild: true
runner:
  default: pulumi-ubuntu-8core
  prerequisites: pulumi-ubuntu-8core
env:
    ARM_CLIENT_ID: ${{ secrets.ARM_CLIENT_ID }}
    ARM_ENVIRONMENT: "public"
    ARM_LOCATION: "westus2"
    ARM_SUBSCRIPTION_ID: ${{ secrets.ARM_SUBSCRIPTION_ID }}
    ARM_TENANT_ID: ${{ secrets.ARM_TENANT_ID }}
    ARM_CLIENT_SECRET: ${{ secrets.ARM_CLIENT_SECRET }}
    PULUMI_MISSING_DOCS_ERROR: true
    # Would rather fail the build to force listing dependencies manually under plugins: than
    # auto-install a floating dependency which may influence example generation and cause
    # non-deterministic builds later on.
    #
    # Unfortunately this does not work yet because of e2e tests (example-based tests). Need to find a
    # way to scope this env var so that it does not configure tests.
    #
    #     Test_sql/e2e: Error: error resolving type of resource random: internal error loading package "random": no resource plugin
    #         'pulumi-resource-random' found in the workspace or on your $PATH
    #
    # PULUMI_DISABLE_AUTOMATIC_PLUGIN_ACQUISITION: true
upstream-provider-repo: terraform-provider-azurerm
makeTemplate: bridged
goBuildParallelism: 2
integrationTestProvider: true
pulumiConvert: 1
esc:
  enabled: true