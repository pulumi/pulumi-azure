// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package containerapp

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Manages a Container App Environment.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-azure/sdk/v5/go/azure/containerapp"
//	"github.com/pulumi/pulumi-azure/sdk/v5/go/azure/core"
//	"github.com/pulumi/pulumi-azure/sdk/v5/go/azure/operationalinsights"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			exampleResourceGroup, err := core.NewResourceGroup(ctx, "exampleResourceGroup", &core.ResourceGroupArgs{
//				Location: pulumi.String("West Europe"),
//			})
//			if err != nil {
//				return err
//			}
//			exampleAnalyticsWorkspace, err := operationalinsights.NewAnalyticsWorkspace(ctx, "exampleAnalyticsWorkspace", &operationalinsights.AnalyticsWorkspaceArgs{
//				Location:          exampleResourceGroup.Location,
//				ResourceGroupName: exampleResourceGroup.Name,
//				Sku:               pulumi.String("PerGB2018"),
//				RetentionInDays:   pulumi.Int(30),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = containerapp.NewEnvironment(ctx, "exampleEnvironment", &containerapp.EnvironmentArgs{
//				Location:                exampleResourceGroup.Location,
//				ResourceGroupName:       exampleResourceGroup.Name,
//				LogAnalyticsWorkspaceId: exampleAnalyticsWorkspace.ID(),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// A Container App Environment can be imported using the `resource id`, e.g.
//
// ```sh
//
//	$ pulumi import azure:containerapp/environment:Environment example "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/resGroup1/providers/Microsoft.App/managedEnvironments/myEnvironment"
//
// ```
type Environment struct {
	pulumi.CustomResourceState

	// The default, publicly resolvable, name of this Container App Environment.
	DefaultDomain pulumi.StringOutput `pulumi:"defaultDomain"`
	// The network addressing in which the Container Apps in this Container App Environment will reside in CIDR notation.
	DockerBridgeCidr pulumi.StringOutput `pulumi:"dockerBridgeCidr"`
	// The existing Subnet to use for the Container Apps Control Plane. Changing this forces a new resource to be created.
	//
	// > **NOTE:** The Subnet must have a `/21` or larger address space.
	InfrastructureSubnetId pulumi.StringPtrOutput `pulumi:"infrastructureSubnetId"`
	// Should the Container Environment operate in Internal Load Balancing Mode? Defaults to `false`. Changing this forces a new resource to be created.
	//
	// > **Note:** can only be set to `true` if `infrastructureSubnetId` is specified.
	InternalLoadBalancerEnabled pulumi.BoolPtrOutput `pulumi:"internalLoadBalancerEnabled"`
	// Specifies the supported Azure location where the Container App Environment is to exist. Changing this forces a new resource to be created.
	Location pulumi.StringOutput `pulumi:"location"`
	// The ID for the Log Analytics Workspace to link this Container Apps Managed Environment to. Changing this forces a new resource to be created.
	LogAnalyticsWorkspaceId pulumi.StringOutput `pulumi:"logAnalyticsWorkspaceId"`
	// The name of the Container Apps Managed Environment. Changing this forces a new resource to be created.
	Name pulumi.StringOutput `pulumi:"name"`
	// The IP range, in CIDR notation, that is reserved for environment infrastructure IP addresses.
	PlatformReservedCidr pulumi.StringOutput `pulumi:"platformReservedCidr"`
	// The IP address from the IP range defined by `platformReservedCidr` that is reserved for the internal DNS server.
	PlatformReservedDnsIpAddress pulumi.StringOutput `pulumi:"platformReservedDnsIpAddress"`
	// The name of the resource group in which the Container App Environment is to be created. Changing this forces a new resource to be created.
	ResourceGroupName pulumi.StringOutput `pulumi:"resourceGroupName"`
	// The Static IP address of the Environment.
	StaticIpAddress pulumi.StringOutput `pulumi:"staticIpAddress"`
	// A mapping of tags to assign to the resource.
	Tags pulumi.StringMapOutput `pulumi:"tags"`
}

// NewEnvironment registers a new resource with the given unique name, arguments, and options.
func NewEnvironment(ctx *pulumi.Context,
	name string, args *EnvironmentArgs, opts ...pulumi.ResourceOption) (*Environment, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.LogAnalyticsWorkspaceId == nil {
		return nil, errors.New("invalid value for required argument 'LogAnalyticsWorkspaceId'")
	}
	if args.ResourceGroupName == nil {
		return nil, errors.New("invalid value for required argument 'ResourceGroupName'")
	}
	var resource Environment
	err := ctx.RegisterResource("azure:containerapp/environment:Environment", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetEnvironment gets an existing Environment resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetEnvironment(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *EnvironmentState, opts ...pulumi.ResourceOption) (*Environment, error) {
	var resource Environment
	err := ctx.ReadResource("azure:containerapp/environment:Environment", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Environment resources.
type environmentState struct {
	// The default, publicly resolvable, name of this Container App Environment.
	DefaultDomain *string `pulumi:"defaultDomain"`
	// The network addressing in which the Container Apps in this Container App Environment will reside in CIDR notation.
	DockerBridgeCidr *string `pulumi:"dockerBridgeCidr"`
	// The existing Subnet to use for the Container Apps Control Plane. Changing this forces a new resource to be created.
	//
	// > **NOTE:** The Subnet must have a `/21` or larger address space.
	InfrastructureSubnetId *string `pulumi:"infrastructureSubnetId"`
	// Should the Container Environment operate in Internal Load Balancing Mode? Defaults to `false`. Changing this forces a new resource to be created.
	//
	// > **Note:** can only be set to `true` if `infrastructureSubnetId` is specified.
	InternalLoadBalancerEnabled *bool `pulumi:"internalLoadBalancerEnabled"`
	// Specifies the supported Azure location where the Container App Environment is to exist. Changing this forces a new resource to be created.
	Location *string `pulumi:"location"`
	// The ID for the Log Analytics Workspace to link this Container Apps Managed Environment to. Changing this forces a new resource to be created.
	LogAnalyticsWorkspaceId *string `pulumi:"logAnalyticsWorkspaceId"`
	// The name of the Container Apps Managed Environment. Changing this forces a new resource to be created.
	Name *string `pulumi:"name"`
	// The IP range, in CIDR notation, that is reserved for environment infrastructure IP addresses.
	PlatformReservedCidr *string `pulumi:"platformReservedCidr"`
	// The IP address from the IP range defined by `platformReservedCidr` that is reserved for the internal DNS server.
	PlatformReservedDnsIpAddress *string `pulumi:"platformReservedDnsIpAddress"`
	// The name of the resource group in which the Container App Environment is to be created. Changing this forces a new resource to be created.
	ResourceGroupName *string `pulumi:"resourceGroupName"`
	// The Static IP address of the Environment.
	StaticIpAddress *string `pulumi:"staticIpAddress"`
	// A mapping of tags to assign to the resource.
	Tags map[string]string `pulumi:"tags"`
}

type EnvironmentState struct {
	// The default, publicly resolvable, name of this Container App Environment.
	DefaultDomain pulumi.StringPtrInput
	// The network addressing in which the Container Apps in this Container App Environment will reside in CIDR notation.
	DockerBridgeCidr pulumi.StringPtrInput
	// The existing Subnet to use for the Container Apps Control Plane. Changing this forces a new resource to be created.
	//
	// > **NOTE:** The Subnet must have a `/21` or larger address space.
	InfrastructureSubnetId pulumi.StringPtrInput
	// Should the Container Environment operate in Internal Load Balancing Mode? Defaults to `false`. Changing this forces a new resource to be created.
	//
	// > **Note:** can only be set to `true` if `infrastructureSubnetId` is specified.
	InternalLoadBalancerEnabled pulumi.BoolPtrInput
	// Specifies the supported Azure location where the Container App Environment is to exist. Changing this forces a new resource to be created.
	Location pulumi.StringPtrInput
	// The ID for the Log Analytics Workspace to link this Container Apps Managed Environment to. Changing this forces a new resource to be created.
	LogAnalyticsWorkspaceId pulumi.StringPtrInput
	// The name of the Container Apps Managed Environment. Changing this forces a new resource to be created.
	Name pulumi.StringPtrInput
	// The IP range, in CIDR notation, that is reserved for environment infrastructure IP addresses.
	PlatformReservedCidr pulumi.StringPtrInput
	// The IP address from the IP range defined by `platformReservedCidr` that is reserved for the internal DNS server.
	PlatformReservedDnsIpAddress pulumi.StringPtrInput
	// The name of the resource group in which the Container App Environment is to be created. Changing this forces a new resource to be created.
	ResourceGroupName pulumi.StringPtrInput
	// The Static IP address of the Environment.
	StaticIpAddress pulumi.StringPtrInput
	// A mapping of tags to assign to the resource.
	Tags pulumi.StringMapInput
}

func (EnvironmentState) ElementType() reflect.Type {
	return reflect.TypeOf((*environmentState)(nil)).Elem()
}

type environmentArgs struct {
	// The existing Subnet to use for the Container Apps Control Plane. Changing this forces a new resource to be created.
	//
	// > **NOTE:** The Subnet must have a `/21` or larger address space.
	InfrastructureSubnetId *string `pulumi:"infrastructureSubnetId"`
	// Should the Container Environment operate in Internal Load Balancing Mode? Defaults to `false`. Changing this forces a new resource to be created.
	//
	// > **Note:** can only be set to `true` if `infrastructureSubnetId` is specified.
	InternalLoadBalancerEnabled *bool `pulumi:"internalLoadBalancerEnabled"`
	// Specifies the supported Azure location where the Container App Environment is to exist. Changing this forces a new resource to be created.
	Location *string `pulumi:"location"`
	// The ID for the Log Analytics Workspace to link this Container Apps Managed Environment to. Changing this forces a new resource to be created.
	LogAnalyticsWorkspaceId string `pulumi:"logAnalyticsWorkspaceId"`
	// The name of the Container Apps Managed Environment. Changing this forces a new resource to be created.
	Name *string `pulumi:"name"`
	// The name of the resource group in which the Container App Environment is to be created. Changing this forces a new resource to be created.
	ResourceGroupName string `pulumi:"resourceGroupName"`
	// A mapping of tags to assign to the resource.
	Tags map[string]string `pulumi:"tags"`
}

// The set of arguments for constructing a Environment resource.
type EnvironmentArgs struct {
	// The existing Subnet to use for the Container Apps Control Plane. Changing this forces a new resource to be created.
	//
	// > **NOTE:** The Subnet must have a `/21` or larger address space.
	InfrastructureSubnetId pulumi.StringPtrInput
	// Should the Container Environment operate in Internal Load Balancing Mode? Defaults to `false`. Changing this forces a new resource to be created.
	//
	// > **Note:** can only be set to `true` if `infrastructureSubnetId` is specified.
	InternalLoadBalancerEnabled pulumi.BoolPtrInput
	// Specifies the supported Azure location where the Container App Environment is to exist. Changing this forces a new resource to be created.
	Location pulumi.StringPtrInput
	// The ID for the Log Analytics Workspace to link this Container Apps Managed Environment to. Changing this forces a new resource to be created.
	LogAnalyticsWorkspaceId pulumi.StringInput
	// The name of the Container Apps Managed Environment. Changing this forces a new resource to be created.
	Name pulumi.StringPtrInput
	// The name of the resource group in which the Container App Environment is to be created. Changing this forces a new resource to be created.
	ResourceGroupName pulumi.StringInput
	// A mapping of tags to assign to the resource.
	Tags pulumi.StringMapInput
}

func (EnvironmentArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*environmentArgs)(nil)).Elem()
}

type EnvironmentInput interface {
	pulumi.Input

	ToEnvironmentOutput() EnvironmentOutput
	ToEnvironmentOutputWithContext(ctx context.Context) EnvironmentOutput
}

func (*Environment) ElementType() reflect.Type {
	return reflect.TypeOf((**Environment)(nil)).Elem()
}

func (i *Environment) ToEnvironmentOutput() EnvironmentOutput {
	return i.ToEnvironmentOutputWithContext(context.Background())
}

func (i *Environment) ToEnvironmentOutputWithContext(ctx context.Context) EnvironmentOutput {
	return pulumi.ToOutputWithContext(ctx, i).(EnvironmentOutput)
}

// EnvironmentArrayInput is an input type that accepts EnvironmentArray and EnvironmentArrayOutput values.
// You can construct a concrete instance of `EnvironmentArrayInput` via:
//
//	EnvironmentArray{ EnvironmentArgs{...} }
type EnvironmentArrayInput interface {
	pulumi.Input

	ToEnvironmentArrayOutput() EnvironmentArrayOutput
	ToEnvironmentArrayOutputWithContext(context.Context) EnvironmentArrayOutput
}

type EnvironmentArray []EnvironmentInput

func (EnvironmentArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Environment)(nil)).Elem()
}

func (i EnvironmentArray) ToEnvironmentArrayOutput() EnvironmentArrayOutput {
	return i.ToEnvironmentArrayOutputWithContext(context.Background())
}

func (i EnvironmentArray) ToEnvironmentArrayOutputWithContext(ctx context.Context) EnvironmentArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(EnvironmentArrayOutput)
}

// EnvironmentMapInput is an input type that accepts EnvironmentMap and EnvironmentMapOutput values.
// You can construct a concrete instance of `EnvironmentMapInput` via:
//
//	EnvironmentMap{ "key": EnvironmentArgs{...} }
type EnvironmentMapInput interface {
	pulumi.Input

	ToEnvironmentMapOutput() EnvironmentMapOutput
	ToEnvironmentMapOutputWithContext(context.Context) EnvironmentMapOutput
}

type EnvironmentMap map[string]EnvironmentInput

func (EnvironmentMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Environment)(nil)).Elem()
}

func (i EnvironmentMap) ToEnvironmentMapOutput() EnvironmentMapOutput {
	return i.ToEnvironmentMapOutputWithContext(context.Background())
}

func (i EnvironmentMap) ToEnvironmentMapOutputWithContext(ctx context.Context) EnvironmentMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(EnvironmentMapOutput)
}

type EnvironmentOutput struct{ *pulumi.OutputState }

func (EnvironmentOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**Environment)(nil)).Elem()
}

func (o EnvironmentOutput) ToEnvironmentOutput() EnvironmentOutput {
	return o
}

func (o EnvironmentOutput) ToEnvironmentOutputWithContext(ctx context.Context) EnvironmentOutput {
	return o
}

// The default, publicly resolvable, name of this Container App Environment.
func (o EnvironmentOutput) DefaultDomain() pulumi.StringOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringOutput { return v.DefaultDomain }).(pulumi.StringOutput)
}

// The network addressing in which the Container Apps in this Container App Environment will reside in CIDR notation.
func (o EnvironmentOutput) DockerBridgeCidr() pulumi.StringOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringOutput { return v.DockerBridgeCidr }).(pulumi.StringOutput)
}

// The existing Subnet to use for the Container Apps Control Plane. Changing this forces a new resource to be created.
//
// > **NOTE:** The Subnet must have a `/21` or larger address space.
func (o EnvironmentOutput) InfrastructureSubnetId() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringPtrOutput { return v.InfrastructureSubnetId }).(pulumi.StringPtrOutput)
}

// Should the Container Environment operate in Internal Load Balancing Mode? Defaults to `false`. Changing this forces a new resource to be created.
//
// > **Note:** can only be set to `true` if `infrastructureSubnetId` is specified.
func (o EnvironmentOutput) InternalLoadBalancerEnabled() pulumi.BoolPtrOutput {
	return o.ApplyT(func(v *Environment) pulumi.BoolPtrOutput { return v.InternalLoadBalancerEnabled }).(pulumi.BoolPtrOutput)
}

// Specifies the supported Azure location where the Container App Environment is to exist. Changing this forces a new resource to be created.
func (o EnvironmentOutput) Location() pulumi.StringOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringOutput { return v.Location }).(pulumi.StringOutput)
}

// The ID for the Log Analytics Workspace to link this Container Apps Managed Environment to. Changing this forces a new resource to be created.
func (o EnvironmentOutput) LogAnalyticsWorkspaceId() pulumi.StringOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringOutput { return v.LogAnalyticsWorkspaceId }).(pulumi.StringOutput)
}

// The name of the Container Apps Managed Environment. Changing this forces a new resource to be created.
func (o EnvironmentOutput) Name() pulumi.StringOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringOutput { return v.Name }).(pulumi.StringOutput)
}

// The IP range, in CIDR notation, that is reserved for environment infrastructure IP addresses.
func (o EnvironmentOutput) PlatformReservedCidr() pulumi.StringOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringOutput { return v.PlatformReservedCidr }).(pulumi.StringOutput)
}

// The IP address from the IP range defined by `platformReservedCidr` that is reserved for the internal DNS server.
func (o EnvironmentOutput) PlatformReservedDnsIpAddress() pulumi.StringOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringOutput { return v.PlatformReservedDnsIpAddress }).(pulumi.StringOutput)
}

// The name of the resource group in which the Container App Environment is to be created. Changing this forces a new resource to be created.
func (o EnvironmentOutput) ResourceGroupName() pulumi.StringOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringOutput { return v.ResourceGroupName }).(pulumi.StringOutput)
}

// The Static IP address of the Environment.
func (o EnvironmentOutput) StaticIpAddress() pulumi.StringOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringOutput { return v.StaticIpAddress }).(pulumi.StringOutput)
}

// A mapping of tags to assign to the resource.
func (o EnvironmentOutput) Tags() pulumi.StringMapOutput {
	return o.ApplyT(func(v *Environment) pulumi.StringMapOutput { return v.Tags }).(pulumi.StringMapOutput)
}

type EnvironmentArrayOutput struct{ *pulumi.OutputState }

func (EnvironmentArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Environment)(nil)).Elem()
}

func (o EnvironmentArrayOutput) ToEnvironmentArrayOutput() EnvironmentArrayOutput {
	return o
}

func (o EnvironmentArrayOutput) ToEnvironmentArrayOutputWithContext(ctx context.Context) EnvironmentArrayOutput {
	return o
}

func (o EnvironmentArrayOutput) Index(i pulumi.IntInput) EnvironmentOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *Environment {
		return vs[0].([]*Environment)[vs[1].(int)]
	}).(EnvironmentOutput)
}

type EnvironmentMapOutput struct{ *pulumi.OutputState }

func (EnvironmentMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Environment)(nil)).Elem()
}

func (o EnvironmentMapOutput) ToEnvironmentMapOutput() EnvironmentMapOutput {
	return o
}

func (o EnvironmentMapOutput) ToEnvironmentMapOutputWithContext(ctx context.Context) EnvironmentMapOutput {
	return o
}

func (o EnvironmentMapOutput) MapIndex(k pulumi.StringInput) EnvironmentOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *Environment {
		return vs[0].(map[string]*Environment)[vs[1].(string)]
	}).(EnvironmentOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*EnvironmentInput)(nil)).Elem(), &Environment{})
	pulumi.RegisterInputType(reflect.TypeOf((*EnvironmentArrayInput)(nil)).Elem(), EnvironmentArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*EnvironmentMapInput)(nil)).Elem(), EnvironmentMap{})
	pulumi.RegisterOutputType(EnvironmentOutput{})
	pulumi.RegisterOutputType(EnvironmentArrayOutput{})
	pulumi.RegisterOutputType(EnvironmentMapOutput{})
}
