// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

// nolint: lll
package monitoring

import (
	"reflect"

	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/go/pulumi"
)

// Manages a [metric-based alert rule](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitor-quick-resource-metric-alert-portal) in Azure Monitor.
// 
// > This content is derived from https://github.com/terraform-providers/terraform-provider-azurerm/blob/master/website/docs/r/monitor_metric_alertrule.html.markdown.
type MetricAlertRule struct {
	pulumi.CustomResourceState

	// Defines how the metric data is combined over time. Possible values are `Average`, `Minimum`, `Maximum`, `Total`, and `Last`.
	Aggregation pulumi.StringOutput `pulumi:"aggregation"`
	// A verbose description of the alert rule that will be included in the alert email.
	Description pulumi.StringOutput `pulumi:"description"`
	// A `emailAction` block as defined below.
	EmailAction MetricAlertRuleEmailActionOutput `pulumi:"emailAction"`
	// If `true`, the alert rule is enabled. Defaults to `true`.
	Enabled pulumi.BoolPtrOutput `pulumi:"enabled"`
	// Specifies the supported Azure location where the resource exists. Changing this forces a new resource to be created.
	Location pulumi.StringOutput `pulumi:"location"`
	// The metric that defines what the rule monitors.
	MetricName pulumi.StringOutput `pulumi:"metricName"`
	// Specifies the name of the alert rule. Changing this forces a new resource to be created.
	Name pulumi.StringOutput `pulumi:"name"`
	// The operator used to compare the metric data and the threshold. Possible values are `GreaterThan`, `GreaterThanOrEqual`, `LessThan`, and `LessThanOrEqual`.
	Operator pulumi.StringOutput `pulumi:"operator"`
	// The period of time formatted in [ISO 8601 duration format](https://en.wikipedia.org/wiki/ISO_8601#Durations) that is used to monitor the alert activity based on the threshold. The period must be between 5 minutes and 1 day.
	Period pulumi.StringOutput `pulumi:"period"`
	// The name of the resource group in which to create the alert rule. Changing this forces a new resource to be created.
	ResourceGroupName pulumi.StringOutput `pulumi:"resourceGroupName"`
	// The ID of the resource monitored by the alert rule.
	ResourceId pulumi.StringOutput `pulumi:"resourceId"`
	// A mapping of tags to assign to the resource. Changing this forces a new resource to be created.
	Tags pulumi.StringMapOutput `pulumi:"tags"`
	// The threshold value that activates the alert.
	Threshold pulumi.Float64Output `pulumi:"threshold"`
	// A `webhookAction` block as defined below.
	WebhookAction MetricAlertRuleWebhookActionOutput `pulumi:"webhookAction"`
}

// NewMetricAlertRule registers a new resource with the given unique name, arguments, and options.
func NewMetricAlertRule(ctx *pulumi.Context,
	name string, args *MetricAlertRuleArgs, opts ...pulumi.ResourceOption) (*MetricAlertRule, error) {
	if args == nil || args.Aggregation == nil {
		return nil, errors.New("missing required argument 'Aggregation'")
	}
	if args == nil || args.MetricName == nil {
		return nil, errors.New("missing required argument 'MetricName'")
	}
	if args == nil || args.Operator == nil {
		return nil, errors.New("missing required argument 'Operator'")
	}
	if args == nil || args.Period == nil {
		return nil, errors.New("missing required argument 'Period'")
	}
	if args == nil || args.ResourceGroupName == nil {
		return nil, errors.New("missing required argument 'ResourceGroupName'")
	}
	if args == nil || args.ResourceId == nil {
		return nil, errors.New("missing required argument 'ResourceId'")
	}
	if args == nil || args.Threshold == nil {
		return nil, errors.New("missing required argument 'Threshold'")
	}
	if args == nil {
		args = &MetricAlertRuleArgs{}
	}
	var resource MetricAlertRule
	err := ctx.RegisterResource("azure:monitoring/metricAlertRule:MetricAlertRule", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetMetricAlertRule gets an existing MetricAlertRule resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetMetricAlertRule(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *MetricAlertRuleState, opts ...pulumi.ResourceOption) (*MetricAlertRule, error) {
	var resource MetricAlertRule
	err := ctx.ReadResource("azure:monitoring/metricAlertRule:MetricAlertRule", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering MetricAlertRule resources.
type metricAlertRuleState struct {
	// Defines how the metric data is combined over time. Possible values are `Average`, `Minimum`, `Maximum`, `Total`, and `Last`.
	Aggregation *string `pulumi:"aggregation"`
	// A verbose description of the alert rule that will be included in the alert email.
	Description *string `pulumi:"description"`
	// A `emailAction` block as defined below.
	EmailAction *MetricAlertRuleEmailAction `pulumi:"emailAction"`
	// If `true`, the alert rule is enabled. Defaults to `true`.
	Enabled *bool `pulumi:"enabled"`
	// Specifies the supported Azure location where the resource exists. Changing this forces a new resource to be created.
	Location *string `pulumi:"location"`
	// The metric that defines what the rule monitors.
	MetricName *string `pulumi:"metricName"`
	// Specifies the name of the alert rule. Changing this forces a new resource to be created.
	Name *string `pulumi:"name"`
	// The operator used to compare the metric data and the threshold. Possible values are `GreaterThan`, `GreaterThanOrEqual`, `LessThan`, and `LessThanOrEqual`.
	Operator *string `pulumi:"operator"`
	// The period of time formatted in [ISO 8601 duration format](https://en.wikipedia.org/wiki/ISO_8601#Durations) that is used to monitor the alert activity based on the threshold. The period must be between 5 minutes and 1 day.
	Period *string `pulumi:"period"`
	// The name of the resource group in which to create the alert rule. Changing this forces a new resource to be created.
	ResourceGroupName *string `pulumi:"resourceGroupName"`
	// The ID of the resource monitored by the alert rule.
	ResourceId *string `pulumi:"resourceId"`
	// A mapping of tags to assign to the resource. Changing this forces a new resource to be created.
	Tags map[string]string `pulumi:"tags"`
	// The threshold value that activates the alert.
	Threshold *float64 `pulumi:"threshold"`
	// A `webhookAction` block as defined below.
	WebhookAction *MetricAlertRuleWebhookAction `pulumi:"webhookAction"`
}

type MetricAlertRuleState struct {
	// Defines how the metric data is combined over time. Possible values are `Average`, `Minimum`, `Maximum`, `Total`, and `Last`.
	Aggregation pulumi.StringPtrInput
	// A verbose description of the alert rule that will be included in the alert email.
	Description pulumi.StringPtrInput
	// A `emailAction` block as defined below.
	EmailAction MetricAlertRuleEmailActionPtrInput
	// If `true`, the alert rule is enabled. Defaults to `true`.
	Enabled pulumi.BoolPtrInput
	// Specifies the supported Azure location where the resource exists. Changing this forces a new resource to be created.
	Location pulumi.StringPtrInput
	// The metric that defines what the rule monitors.
	MetricName pulumi.StringPtrInput
	// Specifies the name of the alert rule. Changing this forces a new resource to be created.
	Name pulumi.StringPtrInput
	// The operator used to compare the metric data and the threshold. Possible values are `GreaterThan`, `GreaterThanOrEqual`, `LessThan`, and `LessThanOrEqual`.
	Operator pulumi.StringPtrInput
	// The period of time formatted in [ISO 8601 duration format](https://en.wikipedia.org/wiki/ISO_8601#Durations) that is used to monitor the alert activity based on the threshold. The period must be between 5 minutes and 1 day.
	Period pulumi.StringPtrInput
	// The name of the resource group in which to create the alert rule. Changing this forces a new resource to be created.
	ResourceGroupName pulumi.StringPtrInput
	// The ID of the resource monitored by the alert rule.
	ResourceId pulumi.StringPtrInput
	// A mapping of tags to assign to the resource. Changing this forces a new resource to be created.
	Tags pulumi.StringMapInput
	// The threshold value that activates the alert.
	Threshold pulumi.Float64PtrInput
	// A `webhookAction` block as defined below.
	WebhookAction MetricAlertRuleWebhookActionPtrInput
}

func (MetricAlertRuleState) ElementType() reflect.Type {
	return reflect.TypeOf((*metricAlertRuleState)(nil)).Elem()
}

type metricAlertRuleArgs struct {
	// Defines how the metric data is combined over time. Possible values are `Average`, `Minimum`, `Maximum`, `Total`, and `Last`.
	Aggregation string `pulumi:"aggregation"`
	// A verbose description of the alert rule that will be included in the alert email.
	Description *string `pulumi:"description"`
	// A `emailAction` block as defined below.
	EmailAction *MetricAlertRuleEmailAction `pulumi:"emailAction"`
	// If `true`, the alert rule is enabled. Defaults to `true`.
	Enabled *bool `pulumi:"enabled"`
	// Specifies the supported Azure location where the resource exists. Changing this forces a new resource to be created.
	Location *string `pulumi:"location"`
	// The metric that defines what the rule monitors.
	MetricName string `pulumi:"metricName"`
	// Specifies the name of the alert rule. Changing this forces a new resource to be created.
	Name *string `pulumi:"name"`
	// The operator used to compare the metric data and the threshold. Possible values are `GreaterThan`, `GreaterThanOrEqual`, `LessThan`, and `LessThanOrEqual`.
	Operator string `pulumi:"operator"`
	// The period of time formatted in [ISO 8601 duration format](https://en.wikipedia.org/wiki/ISO_8601#Durations) that is used to monitor the alert activity based on the threshold. The period must be between 5 minutes and 1 day.
	Period string `pulumi:"period"`
	// The name of the resource group in which to create the alert rule. Changing this forces a new resource to be created.
	ResourceGroupName string `pulumi:"resourceGroupName"`
	// The ID of the resource monitored by the alert rule.
	ResourceId string `pulumi:"resourceId"`
	// A mapping of tags to assign to the resource. Changing this forces a new resource to be created.
	Tags map[string]string `pulumi:"tags"`
	// The threshold value that activates the alert.
	Threshold float64 `pulumi:"threshold"`
	// A `webhookAction` block as defined below.
	WebhookAction *MetricAlertRuleWebhookAction `pulumi:"webhookAction"`
}

// The set of arguments for constructing a MetricAlertRule resource.
type MetricAlertRuleArgs struct {
	// Defines how the metric data is combined over time. Possible values are `Average`, `Minimum`, `Maximum`, `Total`, and `Last`.
	Aggregation pulumi.StringInput
	// A verbose description of the alert rule that will be included in the alert email.
	Description pulumi.StringPtrInput
	// A `emailAction` block as defined below.
	EmailAction MetricAlertRuleEmailActionPtrInput
	// If `true`, the alert rule is enabled. Defaults to `true`.
	Enabled pulumi.BoolPtrInput
	// Specifies the supported Azure location where the resource exists. Changing this forces a new resource to be created.
	Location pulumi.StringPtrInput
	// The metric that defines what the rule monitors.
	MetricName pulumi.StringInput
	// Specifies the name of the alert rule. Changing this forces a new resource to be created.
	Name pulumi.StringPtrInput
	// The operator used to compare the metric data and the threshold. Possible values are `GreaterThan`, `GreaterThanOrEqual`, `LessThan`, and `LessThanOrEqual`.
	Operator pulumi.StringInput
	// The period of time formatted in [ISO 8601 duration format](https://en.wikipedia.org/wiki/ISO_8601#Durations) that is used to monitor the alert activity based on the threshold. The period must be between 5 minutes and 1 day.
	Period pulumi.StringInput
	// The name of the resource group in which to create the alert rule. Changing this forces a new resource to be created.
	ResourceGroupName pulumi.StringInput
	// The ID of the resource monitored by the alert rule.
	ResourceId pulumi.StringInput
	// A mapping of tags to assign to the resource. Changing this forces a new resource to be created.
	Tags pulumi.StringMapInput
	// The threshold value that activates the alert.
	Threshold pulumi.Float64Input
	// A `webhookAction` block as defined below.
	WebhookAction MetricAlertRuleWebhookActionPtrInput
}

func (MetricAlertRuleArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*metricAlertRuleArgs)(nil)).Elem()
}

