// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package frontdoor

import (
	"context"
	"reflect"

	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Manages an Azure Front Door Rules Engine configuration and rules.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
// 	"github.com/pulumi/pulumi-azure/sdk/v4/go/azure/frontdoor"
// 	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
// )
//
// func main() {
// 	pulumi.Run(func(ctx *pulumi.Context) error {
// 		_, err := frontdoor.NewRulesEngine(ctx, "exampleRulesEngine", &frontdoor.RulesEngineArgs{
// 			FrontdoorName:     pulumi.Any(azurerm_frontdoor.Example.Name),
// 			ResourceGroupName: pulumi.Any(azurerm_frontdoor.Example.Resource_group_name),
// 			Rules: frontdoor.RulesEngineRuleArray{
// 				&frontdoor.RulesEngineRuleArgs{
// 					Name:     pulumi.String("debuggingoutput"),
// 					Priority: pulumi.Int(1),
// 					Action: &frontdoor.RulesEngineRuleActionArgs{
// 						ResponseHeaders: frontdoor.RulesEngineRuleActionResponseHeaderArray{
// 							&frontdoor.RulesEngineRuleActionResponseHeaderArgs{
// 								HeaderActionType: pulumi.String("Append"),
// 								HeaderName:       pulumi.String("X-TEST-HEADER"),
// 								Value:            pulumi.String("Append Header Rule"),
// 							},
// 						},
// 					},
// 				},
// 				&frontdoor.RulesEngineRuleArgs{
// 					Name:     pulumi.String("overwriteorigin"),
// 					Priority: pulumi.Int(2),
// 					MatchConditions: frontdoor.RulesEngineRuleMatchConditionArray{
// 						&frontdoor.RulesEngineRuleMatchConditionArgs{
// 							Variable: pulumi.String("RequestMethod"),
// 							Operator: pulumi.String("Equal"),
// 							Values: pulumi.StringArray{
// 								pulumi.String("GET"),
// 								pulumi.String("POST"),
// 							},
// 						},
// 					},
// 					Action: &frontdoor.RulesEngineRuleActionArgs{
// 						ResponseHeaders: frontdoor.RulesEngineRuleActionResponseHeaderArray{
// 							&frontdoor.RulesEngineRuleActionResponseHeaderArgs{
// 								HeaderActionType: pulumi.String("Overwrite"),
// 								HeaderName:       pulumi.String("Access-Control-Allow-Origin"),
// 								Value:            pulumi.String("*"),
// 							},
// 							&frontdoor.RulesEngineRuleActionResponseHeaderArgs{
// 								HeaderActionType: pulumi.String("Overwrite"),
// 								HeaderName:       pulumi.String("Access-Control-Allow-Credentials"),
// 								Value:            pulumi.String("true"),
// 							},
// 						},
// 					},
// 				},
// 			},
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		return nil
// 	})
// }
// ```
type RulesEngine struct {
	pulumi.CustomResourceState

	Enabled pulumi.BoolPtrOutput `pulumi:"enabled"`
	// The name of the Front Door instance. Changing this forces a new resource to be created.
	FrontdoorName pulumi.StringOutput `pulumi:"frontdoorName"`
	Location      pulumi.StringOutput `pulumi:"location"`
	// The name of the Rules engine configuration. Changing this forces a new resource to be created.
	Name pulumi.StringOutput `pulumi:"name"`
	// The name of the resource group. Changing this forces a new resource to be created.
	ResourceGroupName pulumi.StringOutput `pulumi:"resourceGroupName"`
	// A `rule` block as defined below.
	Rules RulesEngineRuleArrayOutput `pulumi:"rules"`
}

// NewRulesEngine registers a new resource with the given unique name, arguments, and options.
func NewRulesEngine(ctx *pulumi.Context,
	name string, args *RulesEngineArgs, opts ...pulumi.ResourceOption) (*RulesEngine, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.FrontdoorName == nil {
		return nil, errors.New("invalid value for required argument 'FrontdoorName'")
	}
	if args.ResourceGroupName == nil {
		return nil, errors.New("invalid value for required argument 'ResourceGroupName'")
	}
	var resource RulesEngine
	err := ctx.RegisterResource("azure:frontdoor/rulesEngine:RulesEngine", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetRulesEngine gets an existing RulesEngine resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetRulesEngine(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *RulesEngineState, opts ...pulumi.ResourceOption) (*RulesEngine, error) {
	var resource RulesEngine
	err := ctx.ReadResource("azure:frontdoor/rulesEngine:RulesEngine", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering RulesEngine resources.
type rulesEngineState struct {
	Enabled *bool `pulumi:"enabled"`
	// The name of the Front Door instance. Changing this forces a new resource to be created.
	FrontdoorName *string `pulumi:"frontdoorName"`
	Location      *string `pulumi:"location"`
	// The name of the Rules engine configuration. Changing this forces a new resource to be created.
	Name *string `pulumi:"name"`
	// The name of the resource group. Changing this forces a new resource to be created.
	ResourceGroupName *string `pulumi:"resourceGroupName"`
	// A `rule` block as defined below.
	Rules []RulesEngineRule `pulumi:"rules"`
}

type RulesEngineState struct {
	Enabled pulumi.BoolPtrInput
	// The name of the Front Door instance. Changing this forces a new resource to be created.
	FrontdoorName pulumi.StringPtrInput
	Location      pulumi.StringPtrInput
	// The name of the Rules engine configuration. Changing this forces a new resource to be created.
	Name pulumi.StringPtrInput
	// The name of the resource group. Changing this forces a new resource to be created.
	ResourceGroupName pulumi.StringPtrInput
	// A `rule` block as defined below.
	Rules RulesEngineRuleArrayInput
}

func (RulesEngineState) ElementType() reflect.Type {
	return reflect.TypeOf((*rulesEngineState)(nil)).Elem()
}

type rulesEngineArgs struct {
	Enabled *bool `pulumi:"enabled"`
	// The name of the Front Door instance. Changing this forces a new resource to be created.
	FrontdoorName string `pulumi:"frontdoorName"`
	// The name of the Rules engine configuration. Changing this forces a new resource to be created.
	Name *string `pulumi:"name"`
	// The name of the resource group. Changing this forces a new resource to be created.
	ResourceGroupName string `pulumi:"resourceGroupName"`
	// A `rule` block as defined below.
	Rules []RulesEngineRule `pulumi:"rules"`
}

// The set of arguments for constructing a RulesEngine resource.
type RulesEngineArgs struct {
	Enabled pulumi.BoolPtrInput
	// The name of the Front Door instance. Changing this forces a new resource to be created.
	FrontdoorName pulumi.StringInput
	// The name of the Rules engine configuration. Changing this forces a new resource to be created.
	Name pulumi.StringPtrInput
	// The name of the resource group. Changing this forces a new resource to be created.
	ResourceGroupName pulumi.StringInput
	// A `rule` block as defined below.
	Rules RulesEngineRuleArrayInput
}

func (RulesEngineArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*rulesEngineArgs)(nil)).Elem()
}

type RulesEngineInput interface {
	pulumi.Input

	ToRulesEngineOutput() RulesEngineOutput
	ToRulesEngineOutputWithContext(ctx context.Context) RulesEngineOutput
}

func (*RulesEngine) ElementType() reflect.Type {
	return reflect.TypeOf((**RulesEngine)(nil)).Elem()
}

func (i *RulesEngine) ToRulesEngineOutput() RulesEngineOutput {
	return i.ToRulesEngineOutputWithContext(context.Background())
}

func (i *RulesEngine) ToRulesEngineOutputWithContext(ctx context.Context) RulesEngineOutput {
	return pulumi.ToOutputWithContext(ctx, i).(RulesEngineOutput)
}

// RulesEngineArrayInput is an input type that accepts RulesEngineArray and RulesEngineArrayOutput values.
// You can construct a concrete instance of `RulesEngineArrayInput` via:
//
//          RulesEngineArray{ RulesEngineArgs{...} }
type RulesEngineArrayInput interface {
	pulumi.Input

	ToRulesEngineArrayOutput() RulesEngineArrayOutput
	ToRulesEngineArrayOutputWithContext(context.Context) RulesEngineArrayOutput
}

type RulesEngineArray []RulesEngineInput

func (RulesEngineArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*RulesEngine)(nil)).Elem()
}

func (i RulesEngineArray) ToRulesEngineArrayOutput() RulesEngineArrayOutput {
	return i.ToRulesEngineArrayOutputWithContext(context.Background())
}

func (i RulesEngineArray) ToRulesEngineArrayOutputWithContext(ctx context.Context) RulesEngineArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(RulesEngineArrayOutput)
}

// RulesEngineMapInput is an input type that accepts RulesEngineMap and RulesEngineMapOutput values.
// You can construct a concrete instance of `RulesEngineMapInput` via:
//
//          RulesEngineMap{ "key": RulesEngineArgs{...} }
type RulesEngineMapInput interface {
	pulumi.Input

	ToRulesEngineMapOutput() RulesEngineMapOutput
	ToRulesEngineMapOutputWithContext(context.Context) RulesEngineMapOutput
}

type RulesEngineMap map[string]RulesEngineInput

func (RulesEngineMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*RulesEngine)(nil)).Elem()
}

func (i RulesEngineMap) ToRulesEngineMapOutput() RulesEngineMapOutput {
	return i.ToRulesEngineMapOutputWithContext(context.Background())
}

func (i RulesEngineMap) ToRulesEngineMapOutputWithContext(ctx context.Context) RulesEngineMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(RulesEngineMapOutput)
}

type RulesEngineOutput struct{ *pulumi.OutputState }

func (RulesEngineOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**RulesEngine)(nil)).Elem()
}

func (o RulesEngineOutput) ToRulesEngineOutput() RulesEngineOutput {
	return o
}

func (o RulesEngineOutput) ToRulesEngineOutputWithContext(ctx context.Context) RulesEngineOutput {
	return o
}

type RulesEngineArrayOutput struct{ *pulumi.OutputState }

func (RulesEngineArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*RulesEngine)(nil)).Elem()
}

func (o RulesEngineArrayOutput) ToRulesEngineArrayOutput() RulesEngineArrayOutput {
	return o
}

func (o RulesEngineArrayOutput) ToRulesEngineArrayOutputWithContext(ctx context.Context) RulesEngineArrayOutput {
	return o
}

func (o RulesEngineArrayOutput) Index(i pulumi.IntInput) RulesEngineOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *RulesEngine {
		return vs[0].([]*RulesEngine)[vs[1].(int)]
	}).(RulesEngineOutput)
}

type RulesEngineMapOutput struct{ *pulumi.OutputState }

func (RulesEngineMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*RulesEngine)(nil)).Elem()
}

func (o RulesEngineMapOutput) ToRulesEngineMapOutput() RulesEngineMapOutput {
	return o
}

func (o RulesEngineMapOutput) ToRulesEngineMapOutputWithContext(ctx context.Context) RulesEngineMapOutput {
	return o
}

func (o RulesEngineMapOutput) MapIndex(k pulumi.StringInput) RulesEngineOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *RulesEngine {
		return vs[0].(map[string]*RulesEngine)[vs[1].(string)]
	}).(RulesEngineOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*RulesEngineInput)(nil)).Elem(), &RulesEngine{})
	pulumi.RegisterInputType(reflect.TypeOf((*RulesEngineArrayInput)(nil)).Elem(), RulesEngineArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*RulesEngineMapInput)(nil)).Elem(), RulesEngineMap{})
	pulumi.RegisterOutputType(RulesEngineOutput{})
	pulumi.RegisterOutputType(RulesEngineArrayOutput{})
	pulumi.RegisterOutputType(RulesEngineMapOutput{})
}
