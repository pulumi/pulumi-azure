// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package sentinel

import (
	"context"
	"reflect"

	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Manages a Sentinel Automation Rule.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
// 	"github.com/pulumi/pulumi-azure/sdk/v4/go/azure/core"
// 	"github.com/pulumi/pulumi-azure/sdk/v4/go/azure/operationalinsights"
// 	"github.com/pulumi/pulumi-azure/sdk/v4/go/azure/sentinel"
// 	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
// )
//
// func main() {
// 	pulumi.Run(func(ctx *pulumi.Context) error {
// 		exampleResourceGroup, err := core.NewResourceGroup(ctx, "exampleResourceGroup", &core.ResourceGroupArgs{
// 			Location: pulumi.String("west europe"),
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		exampleAnalyticsWorkspace, err := operationalinsights.NewAnalyticsWorkspace(ctx, "exampleAnalyticsWorkspace", &operationalinsights.AnalyticsWorkspaceArgs{
// 			Location:          exampleResourceGroup.Location,
// 			ResourceGroupName: exampleResourceGroup.Name,
// 			Sku:               pulumi.String("pergb2018"),
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		sentinel, err := operationalinsights.NewAnalyticsSolution(ctx, "sentinel", &operationalinsights.AnalyticsSolutionArgs{
// 			SolutionName:        pulumi.String("SecurityInsights"),
// 			Location:            exampleResourceGroup.Location,
// 			ResourceGroupName:   exampleResourceGroup.Name,
// 			WorkspaceResourceId: exampleAnalyticsWorkspace.ID(),
// 			WorkspaceName:       exampleAnalyticsWorkspace.Name,
// 			Plan: &operationalinsights.AnalyticsSolutionPlanArgs{
// 				Publisher: pulumi.String("Microsoft"),
// 				Product:   pulumi.String("OMSGallery/SecurityInsights"),
// 			},
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		_, err = sentinel.NewAutomationRule(ctx, "exampleAutomationRule", &sentinel.AutomationRuleArgs{
// 			LogAnalyticsWorkspaceId: sentinel.WorkspaceResourceId,
// 			DisplayName:             pulumi.String("automation_rule1"),
// 			Order:                   pulumi.Int(1),
// 			ActionIncidents: sentinel.AutomationRuleActionIncidentArray{
// 				&sentinel.AutomationRuleActionIncidentArgs{
// 					Order:  pulumi.Int(1),
// 					Status: pulumi.String("Active"),
// 				},
// 			},
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		return nil
// 	})
// }
// ```
//
// ## Import
//
// Sentinel Automation Rules can be imported using the `resource id`, e.g.
//
// ```sh
//  $ pulumi import azure:sentinel/authomationRule:AuthomationRule example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.OperationalInsights/workspaces/workspace1/providers/Microsoft.SecurityInsights/AutomationRules/rule1
// ```
//
// Deprecated: azure.sentinel.AuthomationRule has been deprecated in favor of azure.sentinel.AutomationRule
type AuthomationRule struct {
	pulumi.CustomResourceState

	// One or more `actionIncident` blocks as defined below.
	ActionIncidents AuthomationRuleActionIncidentArrayOutput `pulumi:"actionIncidents"`
	// One or more `actionPlaybook` blocks as defined below.
	ActionPlaybooks AuthomationRuleActionPlaybookArrayOutput `pulumi:"actionPlaybooks"`
	// One or more `condition` blocks as defined below.
	Conditions AuthomationRuleConditionArrayOutput `pulumi:"conditions"`
	// The display name which should be used for this Sentinel Automation Rule.
	DisplayName pulumi.StringOutput `pulumi:"displayName"`
	// Whether this Sentinel Automation Rule is enabled? Defaults to `true`.
	Enabled pulumi.BoolPtrOutput `pulumi:"enabled"`
	// The time in RFC3339 format of kind `UTC` that determines when this Automation Rule should expire and be disabled.
	Expiration pulumi.StringPtrOutput `pulumi:"expiration"`
	// The ID of the Log Analytics Workspace where this Sentinel applies to. Changing this forces a new Sentinel Automation Rule to be created.
	LogAnalyticsWorkspaceId pulumi.StringOutput `pulumi:"logAnalyticsWorkspaceId"`
	// The UUID which should be used for this Sentinel Automation Rule. Changing this forces a new Sentinel Automation Rule to be created.
	Name pulumi.StringOutput `pulumi:"name"`
	// The order of this Sentinel Automation Rule. Possible values varies between `1` and `1000`.
	Order pulumi.IntOutput `pulumi:"order"`
}

// NewAuthomationRule registers a new resource with the given unique name, arguments, and options.
func NewAuthomationRule(ctx *pulumi.Context,
	name string, args *AuthomationRuleArgs, opts ...pulumi.ResourceOption) (*AuthomationRule, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.DisplayName == nil {
		return nil, errors.New("invalid value for required argument 'DisplayName'")
	}
	if args.LogAnalyticsWorkspaceId == nil {
		return nil, errors.New("invalid value for required argument 'LogAnalyticsWorkspaceId'")
	}
	if args.Order == nil {
		return nil, errors.New("invalid value for required argument 'Order'")
	}
	var resource AuthomationRule
	err := ctx.RegisterResource("azure:sentinel/authomationRule:AuthomationRule", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetAuthomationRule gets an existing AuthomationRule resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetAuthomationRule(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *AuthomationRuleState, opts ...pulumi.ResourceOption) (*AuthomationRule, error) {
	var resource AuthomationRule
	err := ctx.ReadResource("azure:sentinel/authomationRule:AuthomationRule", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering AuthomationRule resources.
type authomationRuleState struct {
	// One or more `actionIncident` blocks as defined below.
	ActionIncidents []AuthomationRuleActionIncident `pulumi:"actionIncidents"`
	// One or more `actionPlaybook` blocks as defined below.
	ActionPlaybooks []AuthomationRuleActionPlaybook `pulumi:"actionPlaybooks"`
	// One or more `condition` blocks as defined below.
	Conditions []AuthomationRuleCondition `pulumi:"conditions"`
	// The display name which should be used for this Sentinel Automation Rule.
	DisplayName *string `pulumi:"displayName"`
	// Whether this Sentinel Automation Rule is enabled? Defaults to `true`.
	Enabled *bool `pulumi:"enabled"`
	// The time in RFC3339 format of kind `UTC` that determines when this Automation Rule should expire and be disabled.
	Expiration *string `pulumi:"expiration"`
	// The ID of the Log Analytics Workspace where this Sentinel applies to. Changing this forces a new Sentinel Automation Rule to be created.
	LogAnalyticsWorkspaceId *string `pulumi:"logAnalyticsWorkspaceId"`
	// The UUID which should be used for this Sentinel Automation Rule. Changing this forces a new Sentinel Automation Rule to be created.
	Name *string `pulumi:"name"`
	// The order of this Sentinel Automation Rule. Possible values varies between `1` and `1000`.
	Order *int `pulumi:"order"`
}

type AuthomationRuleState struct {
	// One or more `actionIncident` blocks as defined below.
	ActionIncidents AuthomationRuleActionIncidentArrayInput
	// One or more `actionPlaybook` blocks as defined below.
	ActionPlaybooks AuthomationRuleActionPlaybookArrayInput
	// One or more `condition` blocks as defined below.
	Conditions AuthomationRuleConditionArrayInput
	// The display name which should be used for this Sentinel Automation Rule.
	DisplayName pulumi.StringPtrInput
	// Whether this Sentinel Automation Rule is enabled? Defaults to `true`.
	Enabled pulumi.BoolPtrInput
	// The time in RFC3339 format of kind `UTC` that determines when this Automation Rule should expire and be disabled.
	Expiration pulumi.StringPtrInput
	// The ID of the Log Analytics Workspace where this Sentinel applies to. Changing this forces a new Sentinel Automation Rule to be created.
	LogAnalyticsWorkspaceId pulumi.StringPtrInput
	// The UUID which should be used for this Sentinel Automation Rule. Changing this forces a new Sentinel Automation Rule to be created.
	Name pulumi.StringPtrInput
	// The order of this Sentinel Automation Rule. Possible values varies between `1` and `1000`.
	Order pulumi.IntPtrInput
}

func (AuthomationRuleState) ElementType() reflect.Type {
	return reflect.TypeOf((*authomationRuleState)(nil)).Elem()
}

type authomationRuleArgs struct {
	// One or more `actionIncident` blocks as defined below.
	ActionIncidents []AuthomationRuleActionIncident `pulumi:"actionIncidents"`
	// One or more `actionPlaybook` blocks as defined below.
	ActionPlaybooks []AuthomationRuleActionPlaybook `pulumi:"actionPlaybooks"`
	// One or more `condition` blocks as defined below.
	Conditions []AuthomationRuleCondition `pulumi:"conditions"`
	// The display name which should be used for this Sentinel Automation Rule.
	DisplayName string `pulumi:"displayName"`
	// Whether this Sentinel Automation Rule is enabled? Defaults to `true`.
	Enabled *bool `pulumi:"enabled"`
	// The time in RFC3339 format of kind `UTC` that determines when this Automation Rule should expire and be disabled.
	Expiration *string `pulumi:"expiration"`
	// The ID of the Log Analytics Workspace where this Sentinel applies to. Changing this forces a new Sentinel Automation Rule to be created.
	LogAnalyticsWorkspaceId string `pulumi:"logAnalyticsWorkspaceId"`
	// The UUID which should be used for this Sentinel Automation Rule. Changing this forces a new Sentinel Automation Rule to be created.
	Name *string `pulumi:"name"`
	// The order of this Sentinel Automation Rule. Possible values varies between `1` and `1000`.
	Order int `pulumi:"order"`
}

// The set of arguments for constructing a AuthomationRule resource.
type AuthomationRuleArgs struct {
	// One or more `actionIncident` blocks as defined below.
	ActionIncidents AuthomationRuleActionIncidentArrayInput
	// One or more `actionPlaybook` blocks as defined below.
	ActionPlaybooks AuthomationRuleActionPlaybookArrayInput
	// One or more `condition` blocks as defined below.
	Conditions AuthomationRuleConditionArrayInput
	// The display name which should be used for this Sentinel Automation Rule.
	DisplayName pulumi.StringInput
	// Whether this Sentinel Automation Rule is enabled? Defaults to `true`.
	Enabled pulumi.BoolPtrInput
	// The time in RFC3339 format of kind `UTC` that determines when this Automation Rule should expire and be disabled.
	Expiration pulumi.StringPtrInput
	// The ID of the Log Analytics Workspace where this Sentinel applies to. Changing this forces a new Sentinel Automation Rule to be created.
	LogAnalyticsWorkspaceId pulumi.StringInput
	// The UUID which should be used for this Sentinel Automation Rule. Changing this forces a new Sentinel Automation Rule to be created.
	Name pulumi.StringPtrInput
	// The order of this Sentinel Automation Rule. Possible values varies between `1` and `1000`.
	Order pulumi.IntInput
}

func (AuthomationRuleArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*authomationRuleArgs)(nil)).Elem()
}

type AuthomationRuleInput interface {
	pulumi.Input

	ToAuthomationRuleOutput() AuthomationRuleOutput
	ToAuthomationRuleOutputWithContext(ctx context.Context) AuthomationRuleOutput
}

func (*AuthomationRule) ElementType() reflect.Type {
	return reflect.TypeOf((*AuthomationRule)(nil))
}

func (i *AuthomationRule) ToAuthomationRuleOutput() AuthomationRuleOutput {
	return i.ToAuthomationRuleOutputWithContext(context.Background())
}

func (i *AuthomationRule) ToAuthomationRuleOutputWithContext(ctx context.Context) AuthomationRuleOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AuthomationRuleOutput)
}

func (i *AuthomationRule) ToAuthomationRulePtrOutput() AuthomationRulePtrOutput {
	return i.ToAuthomationRulePtrOutputWithContext(context.Background())
}

func (i *AuthomationRule) ToAuthomationRulePtrOutputWithContext(ctx context.Context) AuthomationRulePtrOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AuthomationRulePtrOutput)
}

type AuthomationRulePtrInput interface {
	pulumi.Input

	ToAuthomationRulePtrOutput() AuthomationRulePtrOutput
	ToAuthomationRulePtrOutputWithContext(ctx context.Context) AuthomationRulePtrOutput
}

type authomationRulePtrType AuthomationRuleArgs

func (*authomationRulePtrType) ElementType() reflect.Type {
	return reflect.TypeOf((**AuthomationRule)(nil))
}

func (i *authomationRulePtrType) ToAuthomationRulePtrOutput() AuthomationRulePtrOutput {
	return i.ToAuthomationRulePtrOutputWithContext(context.Background())
}

func (i *authomationRulePtrType) ToAuthomationRulePtrOutputWithContext(ctx context.Context) AuthomationRulePtrOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AuthomationRulePtrOutput)
}

// AuthomationRuleArrayInput is an input type that accepts AuthomationRuleArray and AuthomationRuleArrayOutput values.
// You can construct a concrete instance of `AuthomationRuleArrayInput` via:
//
//          AuthomationRuleArray{ AuthomationRuleArgs{...} }
type AuthomationRuleArrayInput interface {
	pulumi.Input

	ToAuthomationRuleArrayOutput() AuthomationRuleArrayOutput
	ToAuthomationRuleArrayOutputWithContext(context.Context) AuthomationRuleArrayOutput
}

type AuthomationRuleArray []AuthomationRuleInput

func (AuthomationRuleArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AuthomationRule)(nil)).Elem()
}

func (i AuthomationRuleArray) ToAuthomationRuleArrayOutput() AuthomationRuleArrayOutput {
	return i.ToAuthomationRuleArrayOutputWithContext(context.Background())
}

func (i AuthomationRuleArray) ToAuthomationRuleArrayOutputWithContext(ctx context.Context) AuthomationRuleArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AuthomationRuleArrayOutput)
}

// AuthomationRuleMapInput is an input type that accepts AuthomationRuleMap and AuthomationRuleMapOutput values.
// You can construct a concrete instance of `AuthomationRuleMapInput` via:
//
//          AuthomationRuleMap{ "key": AuthomationRuleArgs{...} }
type AuthomationRuleMapInput interface {
	pulumi.Input

	ToAuthomationRuleMapOutput() AuthomationRuleMapOutput
	ToAuthomationRuleMapOutputWithContext(context.Context) AuthomationRuleMapOutput
}

type AuthomationRuleMap map[string]AuthomationRuleInput

func (AuthomationRuleMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AuthomationRule)(nil)).Elem()
}

func (i AuthomationRuleMap) ToAuthomationRuleMapOutput() AuthomationRuleMapOutput {
	return i.ToAuthomationRuleMapOutputWithContext(context.Background())
}

func (i AuthomationRuleMap) ToAuthomationRuleMapOutputWithContext(ctx context.Context) AuthomationRuleMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AuthomationRuleMapOutput)
}

type AuthomationRuleOutput struct{ *pulumi.OutputState }

func (AuthomationRuleOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*AuthomationRule)(nil))
}

func (o AuthomationRuleOutput) ToAuthomationRuleOutput() AuthomationRuleOutput {
	return o
}

func (o AuthomationRuleOutput) ToAuthomationRuleOutputWithContext(ctx context.Context) AuthomationRuleOutput {
	return o
}

func (o AuthomationRuleOutput) ToAuthomationRulePtrOutput() AuthomationRulePtrOutput {
	return o.ToAuthomationRulePtrOutputWithContext(context.Background())
}

func (o AuthomationRuleOutput) ToAuthomationRulePtrOutputWithContext(ctx context.Context) AuthomationRulePtrOutput {
	return o.ApplyTWithContext(ctx, func(_ context.Context, v AuthomationRule) *AuthomationRule {
		return &v
	}).(AuthomationRulePtrOutput)
}

type AuthomationRulePtrOutput struct{ *pulumi.OutputState }

func (AuthomationRulePtrOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**AuthomationRule)(nil))
}

func (o AuthomationRulePtrOutput) ToAuthomationRulePtrOutput() AuthomationRulePtrOutput {
	return o
}

func (o AuthomationRulePtrOutput) ToAuthomationRulePtrOutputWithContext(ctx context.Context) AuthomationRulePtrOutput {
	return o
}

func (o AuthomationRulePtrOutput) Elem() AuthomationRuleOutput {
	return o.ApplyT(func(v *AuthomationRule) AuthomationRule {
		if v != nil {
			return *v
		}
		var ret AuthomationRule
		return ret
	}).(AuthomationRuleOutput)
}

type AuthomationRuleArrayOutput struct{ *pulumi.OutputState }

func (AuthomationRuleArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]AuthomationRule)(nil))
}

func (o AuthomationRuleArrayOutput) ToAuthomationRuleArrayOutput() AuthomationRuleArrayOutput {
	return o
}

func (o AuthomationRuleArrayOutput) ToAuthomationRuleArrayOutputWithContext(ctx context.Context) AuthomationRuleArrayOutput {
	return o
}

func (o AuthomationRuleArrayOutput) Index(i pulumi.IntInput) AuthomationRuleOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) AuthomationRule {
		return vs[0].([]AuthomationRule)[vs[1].(int)]
	}).(AuthomationRuleOutput)
}

type AuthomationRuleMapOutput struct{ *pulumi.OutputState }

func (AuthomationRuleMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]AuthomationRule)(nil))
}

func (o AuthomationRuleMapOutput) ToAuthomationRuleMapOutput() AuthomationRuleMapOutput {
	return o
}

func (o AuthomationRuleMapOutput) ToAuthomationRuleMapOutputWithContext(ctx context.Context) AuthomationRuleMapOutput {
	return o
}

func (o AuthomationRuleMapOutput) MapIndex(k pulumi.StringInput) AuthomationRuleOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) AuthomationRule {
		return vs[0].(map[string]AuthomationRule)[vs[1].(string)]
	}).(AuthomationRuleOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*AuthomationRuleInput)(nil)).Elem(), &AuthomationRule{})
	pulumi.RegisterInputType(reflect.TypeOf((*AuthomationRulePtrInput)(nil)).Elem(), &AuthomationRule{})
	pulumi.RegisterInputType(reflect.TypeOf((*AuthomationRuleArrayInput)(nil)).Elem(), AuthomationRuleArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*AuthomationRuleMapInput)(nil)).Elem(), AuthomationRuleMap{})
	pulumi.RegisterOutputType(AuthomationRuleOutput{})
	pulumi.RegisterOutputType(AuthomationRulePtrOutput{})
	pulumi.RegisterOutputType(AuthomationRuleArrayOutput{})
	pulumi.RegisterOutputType(AuthomationRuleMapOutput{})
}
