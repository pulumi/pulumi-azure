// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Azure.PostgreSql
{
    /// <summary>
    /// Manages a PostgreSQL Flexible Server.
    /// 
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Azure = Pulumi.Azure;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var example = new Azure.Core.ResourceGroup("example", new()
    ///     {
    ///         Name = "example-resources",
    ///         Location = "West Europe",
    ///     });
    /// 
    ///     var exampleVirtualNetwork = new Azure.Network.VirtualNetwork("example", new()
    ///     {
    ///         Name = "example-vn",
    ///         Location = example.Location,
    ///         ResourceGroupName = example.Name,
    ///         AddressSpaces = new[]
    ///         {
    ///             "10.0.0.0/16",
    ///         },
    ///     });
    /// 
    ///     var exampleSubnet = new Azure.Network.Subnet("example", new()
    ///     {
    ///         Name = "example-sn",
    ///         ResourceGroupName = example.Name,
    ///         VirtualNetworkName = exampleVirtualNetwork.Name,
    ///         AddressPrefixes = new[]
    ///         {
    ///             "10.0.2.0/24",
    ///         },
    ///         ServiceEndpoints = new[]
    ///         {
    ///             "Microsoft.Storage",
    ///         },
    ///         Delegations = new[]
    ///         {
    ///             new Azure.Network.Inputs.SubnetDelegationArgs
    ///             {
    ///                 Name = "fs",
    ///                 ServiceDelegation = new Azure.Network.Inputs.SubnetDelegationServiceDelegationArgs
    ///                 {
    ///                     Name = "Microsoft.DBforPostgreSQL/flexibleServers",
    ///                     Actions = new[]
    ///                     {
    ///                         "Microsoft.Network/virtualNetworks/subnets/join/action",
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     var exampleZone = new Azure.PrivateDns.Zone("example", new()
    ///     {
    ///         Name = "example.postgres.database.azure.com",
    ///         ResourceGroupName = example.Name,
    ///     });
    /// 
    ///     var exampleZoneVirtualNetworkLink = new Azure.PrivateDns.ZoneVirtualNetworkLink("example", new()
    ///     {
    ///         Name = "exampleVnetZone.com",
    ///         PrivateDnsZoneName = exampleZone.Name,
    ///         VirtualNetworkId = exampleVirtualNetwork.Id,
    ///         ResourceGroupName = example.Name,
    ///     }, new CustomResourceOptions
    ///     {
    ///         DependsOn =
    ///         {
    ///             exampleSubnet,
    ///         },
    ///     });
    /// 
    ///     var exampleFlexibleServer = new Azure.PostgreSql.FlexibleServer("example", new()
    ///     {
    ///         Name = "example-psqlflexibleserver",
    ///         ResourceGroupName = example.Name,
    ///         Location = example.Location,
    ///         Version = "12",
    ///         DelegatedSubnetId = exampleSubnet.Id,
    ///         PrivateDnsZoneId = exampleZone.Id,
    ///         PublicNetworkAccessEnabled = false,
    ///         AdministratorLogin = "psqladmin",
    ///         AdministratorPassword = "H@Sh1CoR3!",
    ///         Zone = "1",
    ///         StorageMb = 32768,
    ///         StorageTier = "P30",
    ///         SkuName = "GP_Standard_D4s_v3",
    ///     }, new CustomResourceOptions
    ///     {
    ///         DependsOn =
    ///         {
    ///             exampleZoneVirtualNetworkLink,
    ///         },
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## `storage_tier` defaults based on `storage_mb`
    /// 
    /// &lt;table&gt;
    /// &lt;thead&gt;
    /// &lt;tr&gt;
    /// &lt;th style="text-align:center"&gt;`storage_mb`&lt;/th&gt;
    /// &lt;th style="text-align:center"&gt;GiB&lt;/th&gt;
    /// &lt;th style="text-align:center"&gt;TiB&lt;/th&gt;
    /// &lt;th style="text-align:center"&gt;Default&lt;/th&gt;
    /// &lt;th style="text-align:center"&gt;Supported `storage_tier`'s&lt;/th&gt;
    /// &lt;th style="text-align:center"&gt;Provisioned `IOPS`&lt;/th&gt;
    /// &lt;/tr&gt;
    /// &lt;/thead&gt;
    /// &lt;tbody&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;32768&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;32&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;-&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P4&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P4, P6, P10, P15, P20, P30, P40, P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;120&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;65536&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;64&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;-&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P6&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P6, P10, P15, P20, P30, P40, P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;240&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;131072&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;128&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;-&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P10&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P10, P15, P20, P30, P40, P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;500&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;262144&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;256&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;-&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P15&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P15, P20, P30, P40, P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;1,100&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;524288&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;512&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;-&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P20&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P20, P30, P40, P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;2,300&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;1048576&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;1024&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;1&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P30&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P30, P40, P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;5,000&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;2097152&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;2048&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;2&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P40&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P40, P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;7,500&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;4193280&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;4095&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;4&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;7,500&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;4194304&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;4096&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;4&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P50&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;7,500&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;8388608&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;8192&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;8&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P60&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P60, P70&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;16,000&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;16777216&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;16384&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;16&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P70&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P70, P80&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;18,000&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;tr&gt;
    /// &lt;td style="text-align:center"&gt;33553408&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;32767&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;32&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P80&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;P80&lt;/td&gt;
    /// &lt;td style="text-align:center"&gt;20,000&lt;/td&gt;
    /// &lt;/tr&gt;
    /// &lt;/tbody&gt;
    /// &lt;/table&gt;
    /// 
    /// &gt; **Note:** Host Caching (ReadOnly and Read/Write) is supported on disk sizes less than 4194304 MiB. This means any disk that is provisioned up to 4193280 MiB can take advantage of Host Caching. Host caching is not supported for disk sizes larger than 4193280 MiB. For example, a P50 premium disk provisioned at 4193280 GiB can take advantage of Host caching while a P50 disk provisioned at 4194304 MiB cannot. Moving from a smaller disk size to a larger disk size, greater than 4193280 MiB, will cause the disk to lose the disk caching ability.
    /// 
    /// ***
    /// 
    /// ## Import
    /// 
    /// PostgreSQL Flexible Servers can be imported using the `resource id`, e.g.
    /// 
    /// ```sh
    /// $ pulumi import azure:postgresql/flexibleServer:FlexibleServer example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mygroup1/providers/Microsoft.DBforPostgreSQL/flexibleServers/server1
    /// ```
    /// </summary>
    [AzureResourceType("azure:postgresql/flexibleServer:FlexibleServer")]
    public partial class FlexibleServer : global::Pulumi.CustomResource
    {
        /// <summary>
        /// The Administrator login for the PostgreSQL Flexible Server. Required when `create_mode` is `Default` and `authentication.password_auth_enabled` is `true`.
        /// 
        /// &gt; **Note:** Once `administrator_login` is specified, changing this forces a new PostgreSQL Flexible Server to be created.
        /// 
        /// &gt; **Note:** To create with `administrator_login` specified or update with it first specified , `authentication.password_auth_enabled` must be set to `true`.
        /// </summary>
        [Output("administratorLogin")]
        public Output<string> AdministratorLogin { get; private set; } = null!;

        /// <summary>
        /// The Password associated with the `administrator_login` for the PostgreSQL Flexible Server. Required when `create_mode` is `Default` and `authentication.password_auth_enabled` is `true`.
        /// </summary>
        [Output("administratorPassword")]
        public Output<string?> AdministratorPassword { get; private set; } = null!;

        /// <summary>
        /// An `authentication` block as defined below.
        /// </summary>
        [Output("authentication")]
        public Output<Outputs.FlexibleServerAuthentication> Authentication { get; private set; } = null!;

        /// <summary>
        /// Is the storage auto grow for PostgreSQL Flexible Server enabled? Defaults to `false`.
        /// </summary>
        [Output("autoGrowEnabled")]
        public Output<bool?> AutoGrowEnabled { get; private set; } = null!;

        /// <summary>
        /// The backup retention days for the PostgreSQL Flexible Server. Possible values are between `7` and `35` days.
        /// </summary>
        [Output("backupRetentionDays")]
        public Output<int> BackupRetentionDays { get; private set; } = null!;

        /// <summary>
        /// The creation mode which can be used to restore or replicate existing servers. Possible values are `Default`, `GeoRestore`, `PointInTimeRestore`, `Replica` and `Update`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// 
        /// &gt; **Note:** `create_mode` cannot be changed once it's set since it's a parameter at creation.
        /// 
        /// &gt; **Note:** While creating the resource, `create_mode` cannot be set to `Update`.
        /// </summary>
        [Output("createMode")]
        public Output<string?> CreateMode { get; private set; } = null!;

        /// <summary>
        /// A `customer_managed_key` block as defined below. Changing this forces a new resource to be created.
        /// </summary>
        [Output("customerManagedKey")]
        public Output<Outputs.FlexibleServerCustomerManagedKey?> CustomerManagedKey { get; private set; } = null!;

        /// <summary>
        /// The ID of the virtual network subnet to create the PostgreSQL Flexible Server. The provided subnet should not have any other resource deployed in it and this subnet will be delegated to the PostgreSQL Flexible Server, if not already delegated. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Output("delegatedSubnetId")]
        public Output<string?> DelegatedSubnetId { get; private set; } = null!;

        /// <summary>
        /// The FQDN of the PostgreSQL Flexible Server.
        /// </summary>
        [Output("fqdn")]
        public Output<string> Fqdn { get; private set; } = null!;

        /// <summary>
        /// Is Geo-Redundant backup enabled on the PostgreSQL Flexible Server. Defaults to `false`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Output("geoRedundantBackupEnabled")]
        public Output<bool?> GeoRedundantBackupEnabled { get; private set; } = null!;

        /// <summary>
        /// A `high_availability` block as defined below.
        /// </summary>
        [Output("highAvailability")]
        public Output<Outputs.FlexibleServerHighAvailability?> HighAvailability { get; private set; } = null!;

        /// <summary>
        /// An `identity` block as defined below.
        /// </summary>
        [Output("identity")]
        public Output<Outputs.FlexibleServerIdentity?> Identity { get; private set; } = null!;

        /// <summary>
        /// The Azure Region where the PostgreSQL Flexible Server should exist. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Output("location")]
        public Output<string> Location { get; private set; } = null!;

        /// <summary>
        /// A `maintenance_window` block as defined below.
        /// </summary>
        [Output("maintenanceWindow")]
        public Output<Outputs.FlexibleServerMaintenanceWindow?> MaintenanceWindow { get; private set; } = null!;

        /// <summary>
        /// The name which should be used for this PostgreSQL Flexible Server. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// 
        /// &gt; **Note** This must be unique across the entire Azure service, not just within the resource group.
        /// </summary>
        [Output("name")]
        public Output<string> Name { get; private set; } = null!;

        /// <summary>
        /// The point in time to restore from `source_server_id` when `create_mode` is `GeoRestore`, `PointInTimeRestore`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Output("pointInTimeRestoreTimeInUtc")]
        public Output<string?> PointInTimeRestoreTimeInUtc { get; private set; } = null!;

        /// <summary>
        /// The ID of the private DNS zone to create the PostgreSQL Flexible Server.
        /// 
        /// &gt; **Note:** There will be a breaking change from upstream service at 15th July 2021, the `private_dns_zone_id` will be required when setting a `delegated_subnet_id`. For existing flexible servers who don't want to be recreated, you need to provide the `private_dns_zone_id` to the service team to manually migrate to the specified private DNS zone. The `azure.privatedns.Zone` should end with suffix `.postgres.database.azure.com`.
        /// </summary>
        [Output("privateDnsZoneId")]
        public Output<string> PrivateDnsZoneId { get; private set; } = null!;

        /// <summary>
        /// Specifies whether this PostgreSQL Flexible Server is publicly accessible. Defaults to `true`.
        /// 
        /// &gt; **Note:** `public_network_access_enabled` must be set to `false` when `delegated_subnet_id` and `private_dns_zone_id` have a value.
        /// </summary>
        [Output("publicNetworkAccessEnabled")]
        public Output<bool?> PublicNetworkAccessEnabled { get; private set; } = null!;

        /// <summary>
        /// The replication role for the PostgreSQL Flexible Server. Possible value is `None`.
        /// 
        /// &gt; **Note:** The `replication_role` cannot be set while creating and only can be updated to `None` for replica server.
        /// </summary>
        [Output("replicationRole")]
        public Output<string?> ReplicationRole { get; private set; } = null!;

        /// <summary>
        /// The name of the Resource Group where the PostgreSQL Flexible Server should exist. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Output("resourceGroupName")]
        public Output<string> ResourceGroupName { get; private set; } = null!;

        /// <summary>
        /// The SKU Name for the PostgreSQL Flexible Server. The name of the SKU, follows the `tier` + `name` pattern (e.g. `B_Standard_B1ms`, `GP_Standard_D2s_v3`, `MO_Standard_E4s_v3`).
        /// </summary>
        [Output("skuName")]
        public Output<string> SkuName { get; private set; } = null!;

        /// <summary>
        /// The resource ID of the source PostgreSQL Flexible Server to be restored. Required when `create_mode` is `GeoRestore`, `PointInTimeRestore` or `Replica`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Output("sourceServerId")]
        public Output<string?> SourceServerId { get; private set; } = null!;

        /// <summary>
        /// The max storage allowed for the PostgreSQL Flexible Server. Possible values are `32768`, `65536`, `131072`, `262144`, `524288`, `1048576`, `2097152`, `4193280`, `4194304`, `8388608`, `16777216` and `33553408`.
        /// 
        /// &gt; **Note:** If the `storage_mb` field is undefined on the initial deployment of the PostgreSQL Flexible Server resource it will default to `32768`. If the `storage_mb` field has been defined and then removed, the `storage_mb` field will retain the previously defined value.
        /// 
        /// &gt; **Note:** The `storage_mb` can only be scaled up, for example, you can scale the `storage_mb` from `32768` to `65536`, but not from `65536` to `32768`.
        /// </summary>
        [Output("storageMb")]
        public Output<int> StorageMb { get; private set; } = null!;

        /// <summary>
        /// The name of storage performance tier for IOPS of the PostgreSQL Flexible Server. Possible values are `P4`, `P6`, `P10`, `P15`,`P20`, `P30`,`P40`, `P50`,`P60`, `P70` or `P80`. Default value is dependant on the `storage_mb` value. Please see the `storage_tier` defaults based on `storage_mb` table below.
        /// 
        /// &gt; **Note:** The `storage_tier` can be scaled once every 12 hours, this restriction is in place to ensure stability and performance after any changes to your PostgreSQL Flexible Server's configuration.
        /// </summary>
        [Output("storageTier")]
        public Output<string> StorageTier { get; private set; } = null!;

        /// <summary>
        /// A mapping of tags which should be assigned to the PostgreSQL Flexible Server.
        /// </summary>
        [Output("tags")]
        public Output<ImmutableDictionary<string, string>?> Tags { get; private set; } = null!;

        /// <summary>
        /// The version of PostgreSQL Flexible Server to use. Possible values are `11`,`12`, `13`, `14`, `15` and `16`. Required when `create_mode` is `Default`.
        /// 
        /// &gt; **Note:** When `create_mode` is `Update`, upgrading version wouldn't force a new resource to be created.
        /// </summary>
        [Output("version")]
        public Output<string> Version { get; private set; } = null!;

        [Output("zone")]
        public Output<string?> Zone { get; private set; } = null!;


        /// <summary>
        /// Create a FlexibleServer resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public FlexibleServer(string name, FlexibleServerArgs args, CustomResourceOptions? options = null)
            : base("azure:postgresql/flexibleServer:FlexibleServer", name, args ?? new FlexibleServerArgs(), MakeResourceOptions(options, ""))
        {
        }

        private FlexibleServer(string name, Input<string> id, FlexibleServerState? state = null, CustomResourceOptions? options = null)
            : base("azure:postgresql/flexibleServer:FlexibleServer", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                AdditionalSecretOutputs =
                {
                    "administratorPassword",
                },
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing FlexibleServer resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static FlexibleServer Get(string name, Input<string> id, FlexibleServerState? state = null, CustomResourceOptions? options = null)
        {
            return new FlexibleServer(name, id, state, options);
        }
    }

    public sealed class FlexibleServerArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// The Administrator login for the PostgreSQL Flexible Server. Required when `create_mode` is `Default` and `authentication.password_auth_enabled` is `true`.
        /// 
        /// &gt; **Note:** Once `administrator_login` is specified, changing this forces a new PostgreSQL Flexible Server to be created.
        /// 
        /// &gt; **Note:** To create with `administrator_login` specified or update with it first specified , `authentication.password_auth_enabled` must be set to `true`.
        /// </summary>
        [Input("administratorLogin")]
        public Input<string>? AdministratorLogin { get; set; }

        [Input("administratorPassword")]
        private Input<string>? _administratorPassword;

        /// <summary>
        /// The Password associated with the `administrator_login` for the PostgreSQL Flexible Server. Required when `create_mode` is `Default` and `authentication.password_auth_enabled` is `true`.
        /// </summary>
        public Input<string>? AdministratorPassword
        {
            get => _administratorPassword;
            set
            {
                var emptySecret = Output.CreateSecret(0);
                _administratorPassword = Output.Tuple<Input<string>?, int>(value, emptySecret).Apply(t => t.Item1);
            }
        }

        /// <summary>
        /// An `authentication` block as defined below.
        /// </summary>
        [Input("authentication")]
        public Input<Inputs.FlexibleServerAuthenticationArgs>? Authentication { get; set; }

        /// <summary>
        /// Is the storage auto grow for PostgreSQL Flexible Server enabled? Defaults to `false`.
        /// </summary>
        [Input("autoGrowEnabled")]
        public Input<bool>? AutoGrowEnabled { get; set; }

        /// <summary>
        /// The backup retention days for the PostgreSQL Flexible Server. Possible values are between `7` and `35` days.
        /// </summary>
        [Input("backupRetentionDays")]
        public Input<int>? BackupRetentionDays { get; set; }

        /// <summary>
        /// The creation mode which can be used to restore or replicate existing servers. Possible values are `Default`, `GeoRestore`, `PointInTimeRestore`, `Replica` and `Update`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// 
        /// &gt; **Note:** `create_mode` cannot be changed once it's set since it's a parameter at creation.
        /// 
        /// &gt; **Note:** While creating the resource, `create_mode` cannot be set to `Update`.
        /// </summary>
        [Input("createMode")]
        public Input<string>? CreateMode { get; set; }

        /// <summary>
        /// A `customer_managed_key` block as defined below. Changing this forces a new resource to be created.
        /// </summary>
        [Input("customerManagedKey")]
        public Input<Inputs.FlexibleServerCustomerManagedKeyArgs>? CustomerManagedKey { get; set; }

        /// <summary>
        /// The ID of the virtual network subnet to create the PostgreSQL Flexible Server. The provided subnet should not have any other resource deployed in it and this subnet will be delegated to the PostgreSQL Flexible Server, if not already delegated. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("delegatedSubnetId")]
        public Input<string>? DelegatedSubnetId { get; set; }

        /// <summary>
        /// Is Geo-Redundant backup enabled on the PostgreSQL Flexible Server. Defaults to `false`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("geoRedundantBackupEnabled")]
        public Input<bool>? GeoRedundantBackupEnabled { get; set; }

        /// <summary>
        /// A `high_availability` block as defined below.
        /// </summary>
        [Input("highAvailability")]
        public Input<Inputs.FlexibleServerHighAvailabilityArgs>? HighAvailability { get; set; }

        /// <summary>
        /// An `identity` block as defined below.
        /// </summary>
        [Input("identity")]
        public Input<Inputs.FlexibleServerIdentityArgs>? Identity { get; set; }

        /// <summary>
        /// The Azure Region where the PostgreSQL Flexible Server should exist. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("location")]
        public Input<string>? Location { get; set; }

        /// <summary>
        /// A `maintenance_window` block as defined below.
        /// </summary>
        [Input("maintenanceWindow")]
        public Input<Inputs.FlexibleServerMaintenanceWindowArgs>? MaintenanceWindow { get; set; }

        /// <summary>
        /// The name which should be used for this PostgreSQL Flexible Server. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// 
        /// &gt; **Note** This must be unique across the entire Azure service, not just within the resource group.
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// The point in time to restore from `source_server_id` when `create_mode` is `GeoRestore`, `PointInTimeRestore`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("pointInTimeRestoreTimeInUtc")]
        public Input<string>? PointInTimeRestoreTimeInUtc { get; set; }

        /// <summary>
        /// The ID of the private DNS zone to create the PostgreSQL Flexible Server.
        /// 
        /// &gt; **Note:** There will be a breaking change from upstream service at 15th July 2021, the `private_dns_zone_id` will be required when setting a `delegated_subnet_id`. For existing flexible servers who don't want to be recreated, you need to provide the `private_dns_zone_id` to the service team to manually migrate to the specified private DNS zone. The `azure.privatedns.Zone` should end with suffix `.postgres.database.azure.com`.
        /// </summary>
        [Input("privateDnsZoneId")]
        public Input<string>? PrivateDnsZoneId { get; set; }

        /// <summary>
        /// Specifies whether this PostgreSQL Flexible Server is publicly accessible. Defaults to `true`.
        /// 
        /// &gt; **Note:** `public_network_access_enabled` must be set to `false` when `delegated_subnet_id` and `private_dns_zone_id` have a value.
        /// </summary>
        [Input("publicNetworkAccessEnabled")]
        public Input<bool>? PublicNetworkAccessEnabled { get; set; }

        /// <summary>
        /// The replication role for the PostgreSQL Flexible Server. Possible value is `None`.
        /// 
        /// &gt; **Note:** The `replication_role` cannot be set while creating and only can be updated to `None` for replica server.
        /// </summary>
        [Input("replicationRole")]
        public Input<string>? ReplicationRole { get; set; }

        /// <summary>
        /// The name of the Resource Group where the PostgreSQL Flexible Server should exist. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("resourceGroupName", required: true)]
        public Input<string> ResourceGroupName { get; set; } = null!;

        /// <summary>
        /// The SKU Name for the PostgreSQL Flexible Server. The name of the SKU, follows the `tier` + `name` pattern (e.g. `B_Standard_B1ms`, `GP_Standard_D2s_v3`, `MO_Standard_E4s_v3`).
        /// </summary>
        [Input("skuName")]
        public Input<string>? SkuName { get; set; }

        /// <summary>
        /// The resource ID of the source PostgreSQL Flexible Server to be restored. Required when `create_mode` is `GeoRestore`, `PointInTimeRestore` or `Replica`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("sourceServerId")]
        public Input<string>? SourceServerId { get; set; }

        /// <summary>
        /// The max storage allowed for the PostgreSQL Flexible Server. Possible values are `32768`, `65536`, `131072`, `262144`, `524288`, `1048576`, `2097152`, `4193280`, `4194304`, `8388608`, `16777216` and `33553408`.
        /// 
        /// &gt; **Note:** If the `storage_mb` field is undefined on the initial deployment of the PostgreSQL Flexible Server resource it will default to `32768`. If the `storage_mb` field has been defined and then removed, the `storage_mb` field will retain the previously defined value.
        /// 
        /// &gt; **Note:** The `storage_mb` can only be scaled up, for example, you can scale the `storage_mb` from `32768` to `65536`, but not from `65536` to `32768`.
        /// </summary>
        [Input("storageMb")]
        public Input<int>? StorageMb { get; set; }

        /// <summary>
        /// The name of storage performance tier for IOPS of the PostgreSQL Flexible Server. Possible values are `P4`, `P6`, `P10`, `P15`,`P20`, `P30`,`P40`, `P50`,`P60`, `P70` or `P80`. Default value is dependant on the `storage_mb` value. Please see the `storage_tier` defaults based on `storage_mb` table below.
        /// 
        /// &gt; **Note:** The `storage_tier` can be scaled once every 12 hours, this restriction is in place to ensure stability and performance after any changes to your PostgreSQL Flexible Server's configuration.
        /// </summary>
        [Input("storageTier")]
        public Input<string>? StorageTier { get; set; }

        [Input("tags")]
        private InputMap<string>? _tags;

        /// <summary>
        /// A mapping of tags which should be assigned to the PostgreSQL Flexible Server.
        /// </summary>
        public InputMap<string> Tags
        {
            get => _tags ?? (_tags = new InputMap<string>());
            set => _tags = value;
        }

        /// <summary>
        /// The version of PostgreSQL Flexible Server to use. Possible values are `11`,`12`, `13`, `14`, `15` and `16`. Required when `create_mode` is `Default`.
        /// 
        /// &gt; **Note:** When `create_mode` is `Update`, upgrading version wouldn't force a new resource to be created.
        /// </summary>
        [Input("version")]
        public Input<string>? Version { get; set; }

        [Input("zone")]
        public Input<string>? Zone { get; set; }

        public FlexibleServerArgs()
        {
        }
        public static new FlexibleServerArgs Empty => new FlexibleServerArgs();
    }

    public sealed class FlexibleServerState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// The Administrator login for the PostgreSQL Flexible Server. Required when `create_mode` is `Default` and `authentication.password_auth_enabled` is `true`.
        /// 
        /// &gt; **Note:** Once `administrator_login` is specified, changing this forces a new PostgreSQL Flexible Server to be created.
        /// 
        /// &gt; **Note:** To create with `administrator_login` specified or update with it first specified , `authentication.password_auth_enabled` must be set to `true`.
        /// </summary>
        [Input("administratorLogin")]
        public Input<string>? AdministratorLogin { get; set; }

        [Input("administratorPassword")]
        private Input<string>? _administratorPassword;

        /// <summary>
        /// The Password associated with the `administrator_login` for the PostgreSQL Flexible Server. Required when `create_mode` is `Default` and `authentication.password_auth_enabled` is `true`.
        /// </summary>
        public Input<string>? AdministratorPassword
        {
            get => _administratorPassword;
            set
            {
                var emptySecret = Output.CreateSecret(0);
                _administratorPassword = Output.Tuple<Input<string>?, int>(value, emptySecret).Apply(t => t.Item1);
            }
        }

        /// <summary>
        /// An `authentication` block as defined below.
        /// </summary>
        [Input("authentication")]
        public Input<Inputs.FlexibleServerAuthenticationGetArgs>? Authentication { get; set; }

        /// <summary>
        /// Is the storage auto grow for PostgreSQL Flexible Server enabled? Defaults to `false`.
        /// </summary>
        [Input("autoGrowEnabled")]
        public Input<bool>? AutoGrowEnabled { get; set; }

        /// <summary>
        /// The backup retention days for the PostgreSQL Flexible Server. Possible values are between `7` and `35` days.
        /// </summary>
        [Input("backupRetentionDays")]
        public Input<int>? BackupRetentionDays { get; set; }

        /// <summary>
        /// The creation mode which can be used to restore or replicate existing servers. Possible values are `Default`, `GeoRestore`, `PointInTimeRestore`, `Replica` and `Update`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// 
        /// &gt; **Note:** `create_mode` cannot be changed once it's set since it's a parameter at creation.
        /// 
        /// &gt; **Note:** While creating the resource, `create_mode` cannot be set to `Update`.
        /// </summary>
        [Input("createMode")]
        public Input<string>? CreateMode { get; set; }

        /// <summary>
        /// A `customer_managed_key` block as defined below. Changing this forces a new resource to be created.
        /// </summary>
        [Input("customerManagedKey")]
        public Input<Inputs.FlexibleServerCustomerManagedKeyGetArgs>? CustomerManagedKey { get; set; }

        /// <summary>
        /// The ID of the virtual network subnet to create the PostgreSQL Flexible Server. The provided subnet should not have any other resource deployed in it and this subnet will be delegated to the PostgreSQL Flexible Server, if not already delegated. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("delegatedSubnetId")]
        public Input<string>? DelegatedSubnetId { get; set; }

        /// <summary>
        /// The FQDN of the PostgreSQL Flexible Server.
        /// </summary>
        [Input("fqdn")]
        public Input<string>? Fqdn { get; set; }

        /// <summary>
        /// Is Geo-Redundant backup enabled on the PostgreSQL Flexible Server. Defaults to `false`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("geoRedundantBackupEnabled")]
        public Input<bool>? GeoRedundantBackupEnabled { get; set; }

        /// <summary>
        /// A `high_availability` block as defined below.
        /// </summary>
        [Input("highAvailability")]
        public Input<Inputs.FlexibleServerHighAvailabilityGetArgs>? HighAvailability { get; set; }

        /// <summary>
        /// An `identity` block as defined below.
        /// </summary>
        [Input("identity")]
        public Input<Inputs.FlexibleServerIdentityGetArgs>? Identity { get; set; }

        /// <summary>
        /// The Azure Region where the PostgreSQL Flexible Server should exist. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("location")]
        public Input<string>? Location { get; set; }

        /// <summary>
        /// A `maintenance_window` block as defined below.
        /// </summary>
        [Input("maintenanceWindow")]
        public Input<Inputs.FlexibleServerMaintenanceWindowGetArgs>? MaintenanceWindow { get; set; }

        /// <summary>
        /// The name which should be used for this PostgreSQL Flexible Server. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// 
        /// &gt; **Note** This must be unique across the entire Azure service, not just within the resource group.
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// The point in time to restore from `source_server_id` when `create_mode` is `GeoRestore`, `PointInTimeRestore`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("pointInTimeRestoreTimeInUtc")]
        public Input<string>? PointInTimeRestoreTimeInUtc { get; set; }

        /// <summary>
        /// The ID of the private DNS zone to create the PostgreSQL Flexible Server.
        /// 
        /// &gt; **Note:** There will be a breaking change from upstream service at 15th July 2021, the `private_dns_zone_id` will be required when setting a `delegated_subnet_id`. For existing flexible servers who don't want to be recreated, you need to provide the `private_dns_zone_id` to the service team to manually migrate to the specified private DNS zone. The `azure.privatedns.Zone` should end with suffix `.postgres.database.azure.com`.
        /// </summary>
        [Input("privateDnsZoneId")]
        public Input<string>? PrivateDnsZoneId { get; set; }

        /// <summary>
        /// Specifies whether this PostgreSQL Flexible Server is publicly accessible. Defaults to `true`.
        /// 
        /// &gt; **Note:** `public_network_access_enabled` must be set to `false` when `delegated_subnet_id` and `private_dns_zone_id` have a value.
        /// </summary>
        [Input("publicNetworkAccessEnabled")]
        public Input<bool>? PublicNetworkAccessEnabled { get; set; }

        /// <summary>
        /// The replication role for the PostgreSQL Flexible Server. Possible value is `None`.
        /// 
        /// &gt; **Note:** The `replication_role` cannot be set while creating and only can be updated to `None` for replica server.
        /// </summary>
        [Input("replicationRole")]
        public Input<string>? ReplicationRole { get; set; }

        /// <summary>
        /// The name of the Resource Group where the PostgreSQL Flexible Server should exist. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("resourceGroupName")]
        public Input<string>? ResourceGroupName { get; set; }

        /// <summary>
        /// The SKU Name for the PostgreSQL Flexible Server. The name of the SKU, follows the `tier` + `name` pattern (e.g. `B_Standard_B1ms`, `GP_Standard_D2s_v3`, `MO_Standard_E4s_v3`).
        /// </summary>
        [Input("skuName")]
        public Input<string>? SkuName { get; set; }

        /// <summary>
        /// The resource ID of the source PostgreSQL Flexible Server to be restored. Required when `create_mode` is `GeoRestore`, `PointInTimeRestore` or `Replica`. Changing this forces a new PostgreSQL Flexible Server to be created.
        /// </summary>
        [Input("sourceServerId")]
        public Input<string>? SourceServerId { get; set; }

        /// <summary>
        /// The max storage allowed for the PostgreSQL Flexible Server. Possible values are `32768`, `65536`, `131072`, `262144`, `524288`, `1048576`, `2097152`, `4193280`, `4194304`, `8388608`, `16777216` and `33553408`.
        /// 
        /// &gt; **Note:** If the `storage_mb` field is undefined on the initial deployment of the PostgreSQL Flexible Server resource it will default to `32768`. If the `storage_mb` field has been defined and then removed, the `storage_mb` field will retain the previously defined value.
        /// 
        /// &gt; **Note:** The `storage_mb` can only be scaled up, for example, you can scale the `storage_mb` from `32768` to `65536`, but not from `65536` to `32768`.
        /// </summary>
        [Input("storageMb")]
        public Input<int>? StorageMb { get; set; }

        /// <summary>
        /// The name of storage performance tier for IOPS of the PostgreSQL Flexible Server. Possible values are `P4`, `P6`, `P10`, `P15`,`P20`, `P30`,`P40`, `P50`,`P60`, `P70` or `P80`. Default value is dependant on the `storage_mb` value. Please see the `storage_tier` defaults based on `storage_mb` table below.
        /// 
        /// &gt; **Note:** The `storage_tier` can be scaled once every 12 hours, this restriction is in place to ensure stability and performance after any changes to your PostgreSQL Flexible Server's configuration.
        /// </summary>
        [Input("storageTier")]
        public Input<string>? StorageTier { get; set; }

        [Input("tags")]
        private InputMap<string>? _tags;

        /// <summary>
        /// A mapping of tags which should be assigned to the PostgreSQL Flexible Server.
        /// </summary>
        public InputMap<string> Tags
        {
            get => _tags ?? (_tags = new InputMap<string>());
            set => _tags = value;
        }

        /// <summary>
        /// The version of PostgreSQL Flexible Server to use. Possible values are `11`,`12`, `13`, `14`, `15` and `16`. Required when `create_mode` is `Default`.
        /// 
        /// &gt; **Note:** When `create_mode` is `Update`, upgrading version wouldn't force a new resource to be created.
        /// </summary>
        [Input("version")]
        public Input<string>? Version { get; set; }

        [Input("zone")]
        public Input<string>? Zone { get; set; }

        public FlexibleServerState()
        {
        }
        public static new FlexibleServerState Empty => new FlexibleServerState();
    }
}
