// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Azure.Monitoring
{
    /// <summary>
    /// Manages an AlertingAction Scheduled Query Rules resource within Azure Monitor.
    /// 
    /// &gt; **Note:** This resource is using an older AzureRM API version which is known to cause problems e.g. with custom webhook properties not included in triggered alerts. This resource is superseded by the azure.monitoring.ScheduledQueryRulesAlertV2 resource using newer API versions.
    /// 
    /// ## Import
    /// 
    /// Scheduled Query Rule Alerts can be imported using the `resource id`, e.g.
    /// 
    /// ```sh
    /// $ pulumi import azure:monitoring/scheduledQueryRulesAlert:ScheduledQueryRulesAlert example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.Insights/scheduledQueryRules/myrulename
    /// ```
    /// </summary>
    [AzureResourceType("azure:monitoring/scheduledQueryRulesAlert:ScheduledQueryRulesAlert")]
    public partial class ScheduledQueryRulesAlert : global::Pulumi.CustomResource
    {
        /// <summary>
        /// An `Action` block as defined below.
        /// </summary>
        [Output("action")]
        public Output<Outputs.ScheduledQueryRulesAlertAction> Action { get; private set; } = null!;

        /// <summary>
        /// List of Resource IDs referred into query.
        /// </summary>
        [Output("authorizedResourceIds")]
        public Output<ImmutableArray<string>> AuthorizedResourceIds { get; private set; } = null!;

        /// <summary>
        /// Should the alerts in this Metric Alert be auto resolved? Defaults to `False`.
        /// &gt; **Note:** `AutoMitigationEnabled` and `Throttling` are mutually exclusive and cannot both be set.
        /// </summary>
        [Output("autoMitigationEnabled")]
        public Output<bool?> AutoMitigationEnabled { get; private set; } = null!;

        /// <summary>
        /// The resource URI over which log search query is to be run. Changing this forces a new resource to be created.
        /// </summary>
        [Output("dataSourceId")]
        public Output<string> DataSourceId { get; private set; } = null!;

        /// <summary>
        /// The description of the scheduled query rule.
        /// </summary>
        [Output("description")]
        public Output<string?> Description { get; private set; } = null!;

        /// <summary>
        /// Whether this scheduled query rule is enabled. Default is `True`.
        /// </summary>
        [Output("enabled")]
        public Output<bool?> Enabled { get; private set; } = null!;

        /// <summary>
        /// Frequency (in minutes) at which rule condition should be evaluated. Values must be between 5 and 1440 (inclusive).
        /// </summary>
        [Output("frequency")]
        public Output<int> Frequency { get; private set; } = null!;

        /// <summary>
        /// Specifies the Azure Region where the resource should exist. Changing this forces a new resource to be created.
        /// </summary>
        [Output("location")]
        public Output<string> Location { get; private set; } = null!;

        /// <summary>
        /// The name of the scheduled query rule. Changing this forces a new resource to be created.
        /// </summary>
        [Output("name")]
        public Output<string> Name { get; private set; } = null!;

        /// <summary>
        /// Log search query.
        /// </summary>
        [Output("query")]
        public Output<string> Query { get; private set; } = null!;

        /// <summary>
        /// The type of query results. Possible values are `ResultCount` and `Number`. Default is `ResultCount`. If set to `ResultCount`, `Query` must include an `AggregatedValue` column of a numeric type, for example, `Heartbeat | summarize AggregatedValue = count() by bin(TimeGenerated, 5m)`.
        /// </summary>
        [Output("queryType")]
        public Output<string?> QueryType { get; private set; } = null!;

        /// <summary>
        /// The name of the resource group in which to create the scheduled query rule instance. Changing this forces a new resource to be created.
        /// </summary>
        [Output("resourceGroupName")]
        public Output<string> ResourceGroupName { get; private set; } = null!;

        /// <summary>
        /// Severity of the alert. Possible values include: 0, 1, 2, 3, or 4.
        /// </summary>
        [Output("severity")]
        public Output<int?> Severity { get; private set; } = null!;

        /// <summary>
        /// A mapping of tags to assign to the resource.
        /// </summary>
        [Output("tags")]
        public Output<ImmutableDictionary<string, string>?> Tags { get; private set; } = null!;

        /// <summary>
        /// Time (in minutes) for which Alerts should be throttled or suppressed. Values must be between 0 and 10000 (inclusive).
        /// </summary>
        [Output("throttling")]
        public Output<int?> Throttling { get; private set; } = null!;

        /// <summary>
        /// Time window for which data needs to be fetched for query (must be greater than or equal to `Frequency`). Values must be between 5 and 2880 (inclusive).
        /// </summary>
        [Output("timeWindow")]
        public Output<int> TimeWindow { get; private set; } = null!;

        /// <summary>
        /// A `Trigger` block as defined below.
        /// </summary>
        [Output("trigger")]
        public Output<Outputs.ScheduledQueryRulesAlertTrigger> Trigger { get; private set; } = null!;


        /// <summary>
        /// Create a ScheduledQueryRulesAlert resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public ScheduledQueryRulesAlert(string name, ScheduledQueryRulesAlertArgs args, CustomResourceOptions? options = null)
            : base("azure:monitoring/scheduledQueryRulesAlert:ScheduledQueryRulesAlert", name, args ?? new ScheduledQueryRulesAlertArgs(), MakeResourceOptions(options, ""))
        {
        }

        private ScheduledQueryRulesAlert(string name, Input<string> id, ScheduledQueryRulesAlertState? state = null, CustomResourceOptions? options = null)
            : base("azure:monitoring/scheduledQueryRulesAlert:ScheduledQueryRulesAlert", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing ScheduledQueryRulesAlert resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static ScheduledQueryRulesAlert Get(string name, Input<string> id, ScheduledQueryRulesAlertState? state = null, CustomResourceOptions? options = null)
        {
            return new ScheduledQueryRulesAlert(name, id, state, options);
        }
    }

    public sealed class ScheduledQueryRulesAlertArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// An `Action` block as defined below.
        /// </summary>
        [Input("action", required: true)]
        public Input<Inputs.ScheduledQueryRulesAlertActionArgs> Action { get; set; } = null!;

        [Input("authorizedResourceIds")]
        private InputList<string>? _authorizedResourceIds;

        /// <summary>
        /// List of Resource IDs referred into query.
        /// </summary>
        public InputList<string> AuthorizedResourceIds
        {
            get => _authorizedResourceIds ?? (_authorizedResourceIds = new InputList<string>());
            set => _authorizedResourceIds = value;
        }

        /// <summary>
        /// Should the alerts in this Metric Alert be auto resolved? Defaults to `False`.
        /// &gt; **Note:** `AutoMitigationEnabled` and `Throttling` are mutually exclusive and cannot both be set.
        /// </summary>
        [Input("autoMitigationEnabled")]
        public Input<bool>? AutoMitigationEnabled { get; set; }

        /// <summary>
        /// The resource URI over which log search query is to be run. Changing this forces a new resource to be created.
        /// </summary>
        [Input("dataSourceId", required: true)]
        public Input<string> DataSourceId { get; set; } = null!;

        /// <summary>
        /// The description of the scheduled query rule.
        /// </summary>
        [Input("description")]
        public Input<string>? Description { get; set; }

        /// <summary>
        /// Whether this scheduled query rule is enabled. Default is `True`.
        /// </summary>
        [Input("enabled")]
        public Input<bool>? Enabled { get; set; }

        /// <summary>
        /// Frequency (in minutes) at which rule condition should be evaluated. Values must be between 5 and 1440 (inclusive).
        /// </summary>
        [Input("frequency", required: true)]
        public Input<int> Frequency { get; set; } = null!;

        /// <summary>
        /// Specifies the Azure Region where the resource should exist. Changing this forces a new resource to be created.
        /// </summary>
        [Input("location")]
        public Input<string>? Location { get; set; }

        /// <summary>
        /// The name of the scheduled query rule. Changing this forces a new resource to be created.
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// Log search query.
        /// </summary>
        [Input("query", required: true)]
        public Input<string> Query { get; set; } = null!;

        /// <summary>
        /// The type of query results. Possible values are `ResultCount` and `Number`. Default is `ResultCount`. If set to `ResultCount`, `Query` must include an `AggregatedValue` column of a numeric type, for example, `Heartbeat | summarize AggregatedValue = count() by bin(TimeGenerated, 5m)`.
        /// </summary>
        [Input("queryType")]
        public Input<string>? QueryType { get; set; }

        /// <summary>
        /// The name of the resource group in which to create the scheduled query rule instance. Changing this forces a new resource to be created.
        /// </summary>
        [Input("resourceGroupName", required: true)]
        public Input<string> ResourceGroupName { get; set; } = null!;

        /// <summary>
        /// Severity of the alert. Possible values include: 0, 1, 2, 3, or 4.
        /// </summary>
        [Input("severity")]
        public Input<int>? Severity { get; set; }

        [Input("tags")]
        private InputMap<string>? _tags;

        /// <summary>
        /// A mapping of tags to assign to the resource.
        /// </summary>
        public InputMap<string> Tags
        {
            get => _tags ?? (_tags = new InputMap<string>());
            set => _tags = value;
        }

        /// <summary>
        /// Time (in minutes) for which Alerts should be throttled or suppressed. Values must be between 0 and 10000 (inclusive).
        /// </summary>
        [Input("throttling")]
        public Input<int>? Throttling { get; set; }

        /// <summary>
        /// Time window for which data needs to be fetched for query (must be greater than or equal to `Frequency`). Values must be between 5 and 2880 (inclusive).
        /// </summary>
        [Input("timeWindow", required: true)]
        public Input<int> TimeWindow { get; set; } = null!;

        /// <summary>
        /// A `Trigger` block as defined below.
        /// </summary>
        [Input("trigger", required: true)]
        public Input<Inputs.ScheduledQueryRulesAlertTriggerArgs> Trigger { get; set; } = null!;

        public ScheduledQueryRulesAlertArgs()
        {
        }
        public static new ScheduledQueryRulesAlertArgs Empty => new ScheduledQueryRulesAlertArgs();
    }

    public sealed class ScheduledQueryRulesAlertState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// An `Action` block as defined below.
        /// </summary>
        [Input("action")]
        public Input<Inputs.ScheduledQueryRulesAlertActionGetArgs>? Action { get; set; }

        [Input("authorizedResourceIds")]
        private InputList<string>? _authorizedResourceIds;

        /// <summary>
        /// List of Resource IDs referred into query.
        /// </summary>
        public InputList<string> AuthorizedResourceIds
        {
            get => _authorizedResourceIds ?? (_authorizedResourceIds = new InputList<string>());
            set => _authorizedResourceIds = value;
        }

        /// <summary>
        /// Should the alerts in this Metric Alert be auto resolved? Defaults to `False`.
        /// &gt; **Note:** `AutoMitigationEnabled` and `Throttling` are mutually exclusive and cannot both be set.
        /// </summary>
        [Input("autoMitigationEnabled")]
        public Input<bool>? AutoMitigationEnabled { get; set; }

        /// <summary>
        /// The resource URI over which log search query is to be run. Changing this forces a new resource to be created.
        /// </summary>
        [Input("dataSourceId")]
        public Input<string>? DataSourceId { get; set; }

        /// <summary>
        /// The description of the scheduled query rule.
        /// </summary>
        [Input("description")]
        public Input<string>? Description { get; set; }

        /// <summary>
        /// Whether this scheduled query rule is enabled. Default is `True`.
        /// </summary>
        [Input("enabled")]
        public Input<bool>? Enabled { get; set; }

        /// <summary>
        /// Frequency (in minutes) at which rule condition should be evaluated. Values must be between 5 and 1440 (inclusive).
        /// </summary>
        [Input("frequency")]
        public Input<int>? Frequency { get; set; }

        /// <summary>
        /// Specifies the Azure Region where the resource should exist. Changing this forces a new resource to be created.
        /// </summary>
        [Input("location")]
        public Input<string>? Location { get; set; }

        /// <summary>
        /// The name of the scheduled query rule. Changing this forces a new resource to be created.
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// Log search query.
        /// </summary>
        [Input("query")]
        public Input<string>? Query { get; set; }

        /// <summary>
        /// The type of query results. Possible values are `ResultCount` and `Number`. Default is `ResultCount`. If set to `ResultCount`, `Query` must include an `AggregatedValue` column of a numeric type, for example, `Heartbeat | summarize AggregatedValue = count() by bin(TimeGenerated, 5m)`.
        /// </summary>
        [Input("queryType")]
        public Input<string>? QueryType { get; set; }

        /// <summary>
        /// The name of the resource group in which to create the scheduled query rule instance. Changing this forces a new resource to be created.
        /// </summary>
        [Input("resourceGroupName")]
        public Input<string>? ResourceGroupName { get; set; }

        /// <summary>
        /// Severity of the alert. Possible values include: 0, 1, 2, 3, or 4.
        /// </summary>
        [Input("severity")]
        public Input<int>? Severity { get; set; }

        [Input("tags")]
        private InputMap<string>? _tags;

        /// <summary>
        /// A mapping of tags to assign to the resource.
        /// </summary>
        public InputMap<string> Tags
        {
            get => _tags ?? (_tags = new InputMap<string>());
            set => _tags = value;
        }

        /// <summary>
        /// Time (in minutes) for which Alerts should be throttled or suppressed. Values must be between 0 and 10000 (inclusive).
        /// </summary>
        [Input("throttling")]
        public Input<int>? Throttling { get; set; }

        /// <summary>
        /// Time window for which data needs to be fetched for query (must be greater than or equal to `Frequency`). Values must be between 5 and 2880 (inclusive).
        /// </summary>
        [Input("timeWindow")]
        public Input<int>? TimeWindow { get; set; }

        /// <summary>
        /// A `Trigger` block as defined below.
        /// </summary>
        [Input("trigger")]
        public Input<Inputs.ScheduledQueryRulesAlertTriggerGetArgs>? Trigger { get; set; }

        public ScheduledQueryRulesAlertState()
        {
        }
        public static new ScheduledQueryRulesAlertState Empty => new ScheduledQueryRulesAlertState();
    }
}
