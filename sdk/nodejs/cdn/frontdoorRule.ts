// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "../types/input";
import * as outputs from "../types/output";
import * as utilities from "../utilities";

/**
 * Manages a Frontdoor Rule.
 *
 * !>**IMPORTANT:** To create the Frontdoor Rules resource successfully you **must** add a `dependsOn` attribute to the `azure.cdn.FrontdoorRule` code block and reference both the `azure.cdn.FrontdoorOrigin` and the `azure.cdn.FrontdoorOriginGroup` that are associated with the Frontdoor Rule resource.
 *
 * ## Specifying IP Address Ranges
 *
 * When specifying IP address ranges in the `socketAddressCondition` and the `remoteAddressCondition` `matchValues` use the following format:
 *
 * Use `CIDR` notation when specifying IP address blocks. This means that the syntax for an IP address block is the base IP address followed by a forward slash and the prefix size For example:
 *
 * * `IPv4` example: `5.5.5.64/26` matches any requests that arrive from addresses `5.5.5.64` through `5.5.5.127`.
 * * `IPv6` example: `1:2:3:/48` matches any requests that arrive from addresses `1:2:3:0:0:0:0:0` through `1:2:3:ffff:ffff:ffff:ffff:ffff`.
 *
 * When you specify multiple IP addresses and IP address blocks, `OR` logic is applied.
 *
 * * `IPv4` example: if you add two IP addresses `1.2.3.4` and `10.20.30.40`, the condition is matched for any requests that arrive from either address `1.2.3.4` or `10.20.30.40`.
 * * `IPv6` example: if you add two IP addresses `1:2:3:4:5:6:7:8` and `10:20:30:40:50:60:70:80`, the condition is matched for any requests that arrive from either address `1:2:3:4:5:6:7:8` or `10:20:30:40:50:60:70:80`.
 *
 * ***
 *
 * ## Action Server Variables
 *
 * Rule Set server variables provide access to structured information about the request. You can use server variables to dynamically change the request/response headers or URL rewrite paths/query strings, for example, when a new page load or when a form is posted.
 *
 * ### Supported Action Server Variables
 *
 * | Variable name | Description |
 * |---------------|-------------|
 * | `socketIp`      | The IP address of the direct connection to Azure Front Door edge. If the client used an HTTP proxy or a load balancer to send the request, the value of `socketIp` is the IP address of the proxy or load balancer. |
 * | `clientIp`      | The IP address of the client that made the original request. If there was an `X-Forwarded-For` header in the request, then the client IP address is picked from the header. |
 * | `clientPort`    | The IP port of the client that made the request. |
 * | `hostname`       | The host name in the request from the client. |
 * | `geoCountry`    | Indicates the requester's country/region of origin through its country/region code. |
 * | `httpMethod`    | The method used to make the URL request, such as `GET` or `POST`. |
 * | `httpVersion`   | The request protocol. Usually `HTTP/1.0`, `HTTP/1.1`, or `HTTP/2.0`. |
 * | `queryString`   | The list of variable/value pairs that follows the "?" in the requested URL.<br/>For example, in the request `http://contoso.com:8080/article.aspx?id=123&title=fabrikam`, the `queryString` value will be `id=123&title=fabrikam`. |
 * | `requestScheme` | The request scheme: `http` or `https`. |
 * | `requestUri`    | The full original request URI (with arguments).<br/>For example, in the request `http://contoso.com:8080/article.aspx?id=123&title=fabrikam`, the `requestUri` value will be `/article.aspx?id=123&title=fabrikam`. |
 * | `sslProtocol`   | The protocol of an established TLS connection. |
 * | `serverPort`    | The port of the server that accepted a request. |
 * | `urlPath`       | Identifies the specific resource in the host that the web client wants to access. This is the part of the request URI without the arguments.<br/>For example, in the request `http://contoso.com:8080/article.aspx?id=123&title=fabrikam`, the `uriPath` value will be `/article.aspx`. |
 *
 * ### Action Server Variable Format
 *
 * Server variables can be specified using the following formats:
 *
 * * `{variable}` - Include the entire server variable. For example, if the client IP address is `111.222.333.444` then the `{client_ip}` token would evaluate to `111.222.333.444`.
 *
 * * `{variable:offset}` - Include the server variable after a specific offset, until the end of the variable. The offset is zero-based. For example, if the client IP address is `111.222.333.444` then the `{client_ip:3}` token would evaluate to `.222.333.444`.
 *
 * * `{variable:offset:length}` - Include the server variable after a specific offset, up to the specified length. The offset is zero-based. For example, if the client IP address is `111.222.333.444` then the `{client_ip:4:3}` token would evaluate to `222`.
 *
 * ### Action Server Variables Support
 *
 * Action Server variables are supported on the following actions:
 *
 * * `routeConfigurationOverrideAction`
 * * `requestHeaderAction`
 * * `responseHeaderAction`
 * * `urlRedirectAction`
 * * `urlRewriteAction`
 *
 * ***
 *
 * ## Condition Operator list
 *
 * For rules that accept values from the standard operator list, the following operators are valid:
 *
 * | Operator                   | Description | Condition Value |
 * |----------------------------|-------------|-----------------|
 * | Any                        |Matches when there is any value, regardless of what it is. | Any |
 * | Equal                      | Matches when the value exactly matches the specified string. | Equal |
 * | Contains                   | Matches when the value contains the specified string. | Contains |
 * | Less Than                  | Matches when the length of the value is less than the specified integer. | LessThan |
 * | Greater Than               | Matches when the length of the value is greater than the specified integer. | GreaterThan |
 * | Less Than or Equal         | Matches when the length of the value is less than or equal to the specified integer. | LessThanOrEqual |
 * | Greater Than or Equal      | Matches when the length of the value is greater than or equal to the specified integer. | GreaterThanOrEqual |
 * | Begins With                | Matches when the value begins with the specified string. | BeginsWith |
 * | Ends With                  | Matches when the value ends with the specified string. | EndsWith |
 * | RegEx                      | Matches when the value matches the specified regular expression. See below for further details. | RegEx |
 * | Not Any                    | Matches when there is no value. | Any and negateCondition = true |
 * | Not Equal                  | Matches when the value does not match the specified string. | Equal and negateCondition : true |
 * | Not Contains               | Matches when the value does not contain the specified string. | Contains and negateCondition = true |
 * | Not Less Than              | Matches when the length of the value is not less than the specified integer. | LessThan and negateCondition = true |
 * | Not Greater Than           | Matches when the length of the value is not greater than the specified integer. | GreaterThan and negateCondition = true |
 * | Not Less Than or Equal     | Matches when the length of the value is not less than or equal to the specified integer. | LessThanOrEqual and negateCondition = true |
 * | Not Greater Than or Equals | Matches when the length of the value is not greater than or equal to the specified integer. | GreaterThanOrEqual and negateCondition = true |
 * | Not Begins With            | Matches when the value does not begin with the specified string. | BeginsWith and negateCondition = true |
 * | Not Ends With              | Matches when the value does not end with the specified string. | EndsWith and negateCondition = true |
 * | Not RegEx                  | Matches when the value does not match the specified regular expression. See `Condition Regular Expressions` for further details. | RegEx and negateCondition = true |
 *
 * ***
 *
 * ## Condition Regular Expressions
 *
 * Regular expressions **don't** support the following operations:
 *
 * * Backreferences and capturing subexpressions.
 * * Arbitrary zero-width assertions.
 * * Subroutine references and recursive patterns.
 * * Conditional patterns.
 * * Backtracking control verbs.
 * * The `\C` single-byte directive.
 * * The `\R` newline match directive.
 * * The `\K` start of match reset directive.
 * * Callouts and embedded code.
 * * Atomic grouping and possessive quantifiers.
 *
 * ***
 *
 * ## Condition Transform List
 *
 * For rules that can transform strings, the following transforms are valid:
 *
 * | Transform   | Description |
 * |-------------|-------------|
 * | Lowercase   | Converts the string to the lowercase representation. |
 * | Uppercase   | Converts the string to the uppercase representation. |
 * | Trim        | Trims leading and trailing whitespace from the string. |
 * | RemoveNulls | Removes null values from the string. |
 * | URLEncode   | URL-encodes the string. |
 * | URLDecode   | URL-decodes the string. |
 *
 * ***
 *
 * ## Import
 *
 * cdn Rules can be imported using the `resource id`, e.g.
 *
 * ```sh
 *  $ pulumi import azure:cdn/frontdoorRule:FrontdoorRule example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/resourceGroup1/providers/Microsoft.Cdn/profiles/profile1/ruleSets/ruleSet1/rules/rule1
 * ```
 */
export class FrontdoorRule extends pulumi.CustomResource {
    /**
     * Get an existing FrontdoorRule resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: FrontdoorRuleState, opts?: pulumi.CustomResourceOptions): FrontdoorRule {
        return new FrontdoorRule(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'azure:cdn/frontdoorRule:FrontdoorRule';

    /**
     * Returns true if the given object is an instance of FrontdoorRule.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is FrontdoorRule {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === FrontdoorRule.__pulumiType;
    }

    /**
     * An `actions` block as defined below.
     */
    public readonly actions!: pulumi.Output<outputs.cdn.FrontdoorRuleActions>;
    /**
     * If this rule is a match should the rules engine continue processing the remaining rules or stop? Possible values are `Continue` and `Stop`. Defaults to `Continue`.
     */
    public readonly behaviorOnMatch!: pulumi.Output<string | undefined>;
    /**
     * The resource ID of the Frontdoor Rule Set for this Frontdoor Rule. Changing this forces a new Frontdoor Rule to be created.
     */
    public readonly cdnFrontdoorRuleSetId!: pulumi.Output<string>;
    /**
     * The name of the Frontdoor Rule Set containing this Frontdoor Rule.
     */
    public /*out*/ readonly cdnFrontdoorRuleSetName!: pulumi.Output<string>;
    /**
     * An `conditions` block as defined below.
     */
    public readonly conditions!: pulumi.Output<outputs.cdn.FrontdoorRuleConditions | undefined>;
    /**
     * The name which should be used for this Frontdoor Rule. Possible values must be between 1 and 260 characters in length, begin with a letter and may contain only letters and numbers. Changing this forces a new Frontdoor Rule to be created.
     */
    public readonly name!: pulumi.Output<string>;
    /**
     * The order in which the rules will be applied for the Frontdoor Endpoint. The order value should be sequential and begin at `1`(e.g. `1`, `2`, `3`...). A Frontdoor Rule with a lesser order value will be applied before a rule with a greater order value.
     */
    public readonly order!: pulumi.Output<number>;

    /**
     * Create a FrontdoorRule resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: FrontdoorRuleArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: FrontdoorRuleArgs | FrontdoorRuleState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as FrontdoorRuleState | undefined;
            resourceInputs["actions"] = state ? state.actions : undefined;
            resourceInputs["behaviorOnMatch"] = state ? state.behaviorOnMatch : undefined;
            resourceInputs["cdnFrontdoorRuleSetId"] = state ? state.cdnFrontdoorRuleSetId : undefined;
            resourceInputs["cdnFrontdoorRuleSetName"] = state ? state.cdnFrontdoorRuleSetName : undefined;
            resourceInputs["conditions"] = state ? state.conditions : undefined;
            resourceInputs["name"] = state ? state.name : undefined;
            resourceInputs["order"] = state ? state.order : undefined;
        } else {
            const args = argsOrState as FrontdoorRuleArgs | undefined;
            if ((!args || args.actions === undefined) && !opts.urn) {
                throw new Error("Missing required property 'actions'");
            }
            if ((!args || args.cdnFrontdoorRuleSetId === undefined) && !opts.urn) {
                throw new Error("Missing required property 'cdnFrontdoorRuleSetId'");
            }
            if ((!args || args.order === undefined) && !opts.urn) {
                throw new Error("Missing required property 'order'");
            }
            resourceInputs["actions"] = args ? args.actions : undefined;
            resourceInputs["behaviorOnMatch"] = args ? args.behaviorOnMatch : undefined;
            resourceInputs["cdnFrontdoorRuleSetId"] = args ? args.cdnFrontdoorRuleSetId : undefined;
            resourceInputs["conditions"] = args ? args.conditions : undefined;
            resourceInputs["name"] = args ? args.name : undefined;
            resourceInputs["order"] = args ? args.order : undefined;
            resourceInputs["cdnFrontdoorRuleSetName"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(FrontdoorRule.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering FrontdoorRule resources.
 */
export interface FrontdoorRuleState {
    /**
     * An `actions` block as defined below.
     */
    actions?: pulumi.Input<inputs.cdn.FrontdoorRuleActions>;
    /**
     * If this rule is a match should the rules engine continue processing the remaining rules or stop? Possible values are `Continue` and `Stop`. Defaults to `Continue`.
     */
    behaviorOnMatch?: pulumi.Input<string>;
    /**
     * The resource ID of the Frontdoor Rule Set for this Frontdoor Rule. Changing this forces a new Frontdoor Rule to be created.
     */
    cdnFrontdoorRuleSetId?: pulumi.Input<string>;
    /**
     * The name of the Frontdoor Rule Set containing this Frontdoor Rule.
     */
    cdnFrontdoorRuleSetName?: pulumi.Input<string>;
    /**
     * An `conditions` block as defined below.
     */
    conditions?: pulumi.Input<inputs.cdn.FrontdoorRuleConditions>;
    /**
     * The name which should be used for this Frontdoor Rule. Possible values must be between 1 and 260 characters in length, begin with a letter and may contain only letters and numbers. Changing this forces a new Frontdoor Rule to be created.
     */
    name?: pulumi.Input<string>;
    /**
     * The order in which the rules will be applied for the Frontdoor Endpoint. The order value should be sequential and begin at `1`(e.g. `1`, `2`, `3`...). A Frontdoor Rule with a lesser order value will be applied before a rule with a greater order value.
     */
    order?: pulumi.Input<number>;
}

/**
 * The set of arguments for constructing a FrontdoorRule resource.
 */
export interface FrontdoorRuleArgs {
    /**
     * An `actions` block as defined below.
     */
    actions: pulumi.Input<inputs.cdn.FrontdoorRuleActions>;
    /**
     * If this rule is a match should the rules engine continue processing the remaining rules or stop? Possible values are `Continue` and `Stop`. Defaults to `Continue`.
     */
    behaviorOnMatch?: pulumi.Input<string>;
    /**
     * The resource ID of the Frontdoor Rule Set for this Frontdoor Rule. Changing this forces a new Frontdoor Rule to be created.
     */
    cdnFrontdoorRuleSetId: pulumi.Input<string>;
    /**
     * An `conditions` block as defined below.
     */
    conditions?: pulumi.Input<inputs.cdn.FrontdoorRuleConditions>;
    /**
     * The name which should be used for this Frontdoor Rule. Possible values must be between 1 and 260 characters in length, begin with a letter and may contain only letters and numbers. Changing this forces a new Frontdoor Rule to be created.
     */
    name?: pulumi.Input<string>;
    /**
     * The order in which the rules will be applied for the Frontdoor Endpoint. The order value should be sequential and begin at `1`(e.g. `1`, `2`, `3`...). A Frontdoor Rule with a lesser order value will be applied before a rule with a greater order value.
     */
    order: pulumi.Input<number>;
}
